<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RetailSpot test page</title>
  <style type="text/css">
    .fake-text {
      color: gray;
      margin: 16px;
      max-width: 600px;
      margin: auto;
    }

    .centered {
      text-align: center;
    }

    body {
      font-family: arial;
    }

    .setting {
      margin: 20px;
    }
  </style>

</head>

<body>
  <h1>RetailSpot player test page</h1>
  <div>
    Test config:
    <ul>
      <li>RSPlayer version: <b><span id="rsp-version"></span></b></li>

    </ul>
  </div>
  <div>
    <div class="setting">
      <b>Partner ID:</b>
      <input type="text" id="apikey" />
      <br />
      <input type="checkbox" id="rsp_debug" checked disabled />
      <label for="rsp_debug">Debug log</label>
    </div>
    <div class="setting">
      <button onclick="changeTest()">Update Settings</button>
    </div>
    <div class="setting">
      <b>VAST</b>
      <p>Paste a vast XML here:</p>
      <textarea id="vast" style="width:100%;height:130px;">
        <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<VAST version="2.0">
	<Ad id="447520559">
		<InLine>
			<AdSystem>adnxs</AdSystem>
			<AdTitle>
				<![CDATA[b53-test-crea-video-rcap]]>
			</AdTitle>
			<Error>
				<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=4&error_code=[ERRORCODE]]]>
			</Error>
			<Impression id="adnxs">
				<![CDATA[https://ib.adnxs.com/nop]]>
			</Impression>
			<Creatives>
				<Creative id="905201" AdID="447520559">
					<Linear>
						<Duration>00:00:32</Duration>
						<TrackingEvents>
							<Tracking event="start">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=2]]>
							</Tracking>
							<Tracking event="skip">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=3]]>
							</Tracking>
							<Tracking event="firstQuartile">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=5]]>
							</Tracking>
							<Tracking event="midpoint">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=6]]>
							</Tracking>
							<Tracking event="thirdQuartile">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=7]]>
							</Tracking>
							<Tracking event="complete">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=8]]>
							</Tracking>
							<Tracking event="mute">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=14]]>
							</Tracking>
							<Tracking event="unmute">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=15]]>
							</Tracking>
							<Tracking event="pause">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=16]]>
							</Tracking>
							<Tracking event="resume">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=17]]>
							</Tracking>
							<Tracking event="rewind">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=18]]>
							</Tracking>
							<Tracking event="fullscreen">
								<![CDATA[https://fra1-ib.adnxs.com/vast_track/v2?info=ZgAAAAMArgAFAQmY9gtlAAAAABHTyHgIkc_XdhmY9gtlAAAAACCvvrLVASgAMJBCOJBCQLyQfUiA5-ICUKrltg5YAWICRlJoAXABeACAAQCIAQCQAQCYAQCgAQCoAeLhrtUBsAEB&s=15c8f35f99d2c789824f0c52a346188776ae6a11&event_type=19]]>
							</Tracking>
						</TrackingEvents>
						<VideoClicks>
							<ClickTracking id="adnxs">
								<![CDATA[https://fra1-ib.adnxs.com/click2?e=wqT_3QKZAfCBmQAAAAMAxBkFAQiY7a-oBhDTkePDkPLz63YYpL74lrKcyq5BIKrltg4okEIwkEI4AkCvvrLVAUjz9ZgBUABaA1VTRGIDRVVSaAFwAXiY1myAAYLZBYgBAZABAZgBA6ABAqkBl1Est7Qa8T-xAZdRLLe0GvE_uQEAAAAAAADgP8EBlw0UPMkBl1Est7Qa8T_YAQDgAQA./s=8f021aacbb393fbb96a5ba75720faf31dc2f7366/bcr=AAAAAAAA8D8=/cnd=%21XhYiPwjxlokbEK--stUBGPP1mAEgBCgAMQAAAAAAAPA_OglGUkExOjU0NDZAxkRJAtnr3R_v7T9RAAAAAAAAAABZAAAAAAAAAABhAAAAAAAAAABpAAAAAAAAAABxAAAAAAAAAAB4AIkBAAAAAAAA8D8./cca=ODQ2NCNGUkExOjU0NDY=/bn=93314/]]>
							</ClickTracking>
						</VideoClicks>
						<MediaFiles>
							<MediaFile id="7641237" delivery="progressive" type="video/mp4" width="768" height="432" scalable="true" bitrate="1100" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/c5faaaf5-d66f-4ffb-9992-44d4c0b2a431_768_432_1100k.mp4]]>
							</MediaFile>
							<MediaFile id="7641238" delivery="progressive" type="video/mp4" width="768" height="432" scalable="true" bitrate="1700" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/906474d9-c3be-4ed3-989f-ef520431a50d_768_432_1700k.mp4]]>
							</MediaFile>
							<MediaFile id="7641239" delivery="progressive" type="video/mp4" width="768" height="432" scalable="true" bitrate="1100" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/c5faaaf5-d66f-4ffb-9992-44d4c0b2a431_768_432_1100k.mp4]]>
							</MediaFile>
							<MediaFile id="7641240" delivery="progressive" type="video/webm" width="1280" height="720" scalable="true" bitrate="600" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/aa34e835-db0a-4829-ba74-29a8d84349cc_1280_720_600k.webm]]>
							</MediaFile>
							<MediaFile id="7641241" delivery="progressive" type="video/mp4" width="768" height="432" scalable="true" bitrate="1700" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/906474d9-c3be-4ed3-989f-ef520431a50d_768_432_1700k.mp4]]>
							</MediaFile>
							<MediaFile id="7641242" delivery="progressive" type="video/mp4" width="768" height="432" scalable="true" bitrate="500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/86c68053-9a53-4dc2-a128-e30a6f51accf_768_432_500k.mp4]]>
							</MediaFile>
							<MediaFile id="7641243" delivery="progressive" type="video/webm" width="768" height="432" scalable="true" bitrate="1500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/921b4988-08bb-41d4-8503-4741a41968da_768_432_1500k.webm]]>
							</MediaFile>
							<MediaFile id="7641244" delivery="progressive" type="video/webm" width="1280" height="720" scalable="true" bitrate="600" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/aa34e835-db0a-4829-ba74-29a8d84349cc_1280_720_600k.webm]]>
							</MediaFile>
							<MediaFile id="7641245" delivery="progressive" type="video/mp4" width="1280" height="720" scalable="true" bitrate="1700" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/488ae5b3-aef2-4c80-80ac-d921d4a2aafe_1280_720_1700k.mp4]]>
							</MediaFile>
							<MediaFile id="7641246" delivery="progressive" type="video/mp4" width="768" height="432" scalable="true" bitrate="500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/86c68053-9a53-4dc2-a128-e30a6f51accf_768_432_500k.mp4]]>
							</MediaFile>
							<MediaFile id="7641247" delivery="progressive" type="video/mp4" width="1280" height="720" scalable="true" bitrate="2500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/29c3795f-ac3e-42f2-9194-cd26b95cb110_1280_720_2500k.mp4]]>
							</MediaFile>
							<MediaFile id="7641248" delivery="progressive" type="video/webm" width="768" height="432" scalable="true" bitrate="1500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/921b4988-08bb-41d4-8503-4741a41968da_768_432_1500k.webm]]>
							</MediaFile>
							<MediaFile id="7641249" delivery="progressive" type="video/mp4" width="1280" height="720" scalable="true" bitrate="1100" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/027197cd-d16a-4e93-bc17-4813c34747cd_1280_720_1100k.mp4]]>
							</MediaFile>
							<MediaFile id="7641250" delivery="progressive" type="video/mp4" width="1280" height="720" scalable="true" bitrate="1700" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/488ae5b3-aef2-4c80-80ac-d921d4a2aafe_1280_720_1700k.mp4]]>
							</MediaFile>
							<MediaFile id="7641251" delivery="progressive" type="video/webm" width="1280" height="720" scalable="true" bitrate="2000" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/103033ce-0365-444b-80ff-4d9f76e1256d_1280_720_2000k.webm]]>
							</MediaFile>
							<MediaFile id="7641252" delivery="progressive" type="video/mp4" width="1280" height="720" scalable="true" bitrate="2500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/29c3795f-ac3e-42f2-9194-cd26b95cb110_1280_720_2500k.mp4]]>
							</MediaFile>
							<MediaFile id="7641253" delivery="progressive" type="video/webm" width="768" height="432" scalable="true" bitrate="500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/c60a24e0-5697-434f-855b-381d10f5a925_768_432_500k.webm]]>
							</MediaFile>
							<MediaFile id="7641254" delivery="progressive" type="video/mp4" width="1280" height="720" scalable="true" bitrate="1100" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/027197cd-d16a-4e93-bc17-4813c34747cd_1280_720_1100k.mp4]]>
							</MediaFile>
							<MediaFile id="7641255" delivery="progressive" type="video/mp4" width="1920" height="1080" scalable="true" bitrate="729" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/premium-10a51ed6-21fa-41b4-bbbc-e160cad2aa48.mp4]]>
							</MediaFile>
							<MediaFile id="7641256" delivery="progressive" type="video/webm" width="1280" height="720" scalable="true" bitrate="2000" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/103033ce-0365-444b-80ff-4d9f76e1256d_1280_720_2000k.webm]]>
							</MediaFile>
							<MediaFile id="7641257" delivery="progressive" type="video/webm" width="768" height="432" scalable="true" bitrate="500" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/c60a24e0-5697-434f-855b-381d10f5a925_768_432_500k.webm]]>
							</MediaFile>
							<MediaFile id="7641258" delivery="progressive" type="video/mp4" width="1920" height="1080" scalable="true" bitrate="729" maintainAspectRatio="true">
								<![CDATA[https://crcdn09.adnxs-simple.com/creative/p/8464/2023/6/26/47783492/premium-10a51ed6-21fa-41b4-bbbc-e160cad2aa48.mp4]]>
							</MediaFile>
						</MediaFiles>
					</Linear>
				</Creative>
			</Creatives>
		</InLine>
	</Ad>
</VAST>
</textarea>
      <button id="clear" onclick="javascript:document.getElementById('vast').value =''">Clear</button>

    </div>
    <div class="setting">
      <button onclick="applyVast()">SHOW AD</button>
    </div>
  </div>
  <div id="target" style="display:flex;justify-content:center;"></div>

  <button id="startButton" onclick="startAd()">Start/Restart</button>
  <button id="playPauseButton" onclick="playPause()">Pause/Resume</button>
  <button id="volumeButton" onclick="adjustVolume()">Volume</button>
  <button id="stopButton" onclick="stopAd()">Stop</button>
  <script type="text/javascript">

    function findGetParameter(parameterName) {
      var result = null,
        tmp = [];
      location.search
        .substr(1)
        .split("&")
        .forEach(function (item) {
          tmp = item.split("=");
          if (tmp[0].toLowerCase() === parameterName.toLowerCase()) result = decodeURIComponent(tmp[1]);
        });
      return result;
    }

    function getKeyForValue(array, value, defaultValue) {
      var result = null;
      for (key in array) {
        if (array[key] == value) result = key;
      }

      return result || defaultValue;
    }

    function changeTest() {
      var currentUrl = document.location.href;
      var indexOfQueryStr = currentUrl.lastIndexOf('?');
      if (indexOfQueryStr !== -1) {
        currentUrl = currentUrl.substr(0, indexOfQueryStr);
      }

      var apikey = document.getElementById("apikey").value;

      document.location.href = currentUrl + "?"
        + "&apikey=" + apikey
        + "&rsp_debug=true"
    }
    function applyVast() {
      const RetailSpotConfig = {
        partnerId: apikey,
        vast: document.getElementById("vast").value.trim(),
        width: 320,
        height: 180,
        positionSelector: "#target",
        replayButton: true,
        closeButton: true,
        autoplay: false,
      }

      window.RetailSpot.init(RetailSpotConfig, function (creative) {

        vpaidControl = creative;
        creative.subscribe(function () {
          console.log("RSPlayer: AdLoaded!");
        }, window.RetailSpot.VPAID_EVENTS.AdLoaded);

        creative.subscribe(function (message) {
          console.error("RSPlayer: ERROR! : " + message);
        }, window.RetailSpot.VPAID_EVENTS.AdError);

        creative.subscribe(function (message) {
          console.log("RSPlayer: AdSkipped!");
          document.getElementById("target").innerHTML = "";
        }, window.RetailSpot.VPAID_EVENTS.AdSkipped);

        creative.subscribe(function (message) {
          console.log("RSPlayer: AdStopped!");
        }, window.RetailSpot.VPAID_EVENTS.AdStopped);

        creative.subscribe(function () {
          console.log("RSPlayer: AdVideoStart!");
        }, window.RetailSpot.VPAID_EVENTS.AdVideoStart);

        creative.subscribe(function () {
          console.log("RSPlayer: AdVideoFirstQuartile!");
        }, window.RetailSpot.VPAID_EVENTS.AdVideoFirstQuartile);

        creative.subscribe(function () {
          console.log("RSPlayer: AdVideoMidpoint!");
        }, window.RetailSpot.VPAID_EVENTS.AdVideoMidpoint);

        creative.subscribe(function () {
          console.log("RSPlayer: AdVideoThirdQuartile!");
        }, window.RetailSpot.VPAID_EVENTS.AdVideoThirdQuartile);

        creative.subscribe(function () {
          console.log("RSPlayer: AdVideoComplete!");
        }, window.RetailSpot.VPAID_EVENTS.AdVideoComplete);
      });
    }

    var apikey = findGetParameter("apikey") || "";
    document.getElementById("apikey").value = apikey;

    var s = document.createElement("script");
    s.src = "https://static-preprod.retailspotads.com/rsplayer.js";
    s.onload = function () {
      document.getElementById("rsp-version").innerText = window.RetailSpot.version;
    }
    document.body.appendChild(s);


    var isPlaying = false;
    function startAd() {
      isPlaying = true;
      vpaidControl.startAd();
    }
    function playPause() {
      if (isPlaying) {
        isPlaying = false;
        vpaidControl.pauseAd();
      }
      else {
        isPlaying = true;
        vpaidControl.resumeAd();
      }
    }
    function adjustVolume() {
      if (vpaidControl.getAdVolume()) {
        vpaidControl.setAdVolume(0);
      }
      else {
        vpaidControl.setAdVolume(1);
      }
    }
    function stopAd() {
      vpaidControl.stopAd();
    }
  </script>
</body>

</html>