var RSATV;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){var e=t.getBoundingClientRect(),n=getComputedStyle(t),i=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10),o=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10);return{width:Math.floor(e.width)-o,height:Math.floor(e.height)-i}}t.r(e),t.d(e,{showVideo:()=>ae,version:()=>s});var i=-1;function o(t){var e=function e(){window.clearTimeout(i),i=window.setTimeout((function(){t(),window.removeEventListener("scroll",e)}),500)};i=window.setTimeout((function(){t(),window.removeEventListener("scroll",e)}),1e3),window.addEventListener("scroll",e)}function r(t){var e=null,n=window.innerHeight;return null==t||t.forEach((function(t){var i=Math.abs(t.getBoundingClientRect().bottom-window.innerHeight/2);i<n&&(n=i,e=t)})),e}function a(t,e,n){try{e(t),!n(t)&&t.parentElement&&a(t.parentElement,e,n)}catch(t){}}function l(t,e,n){try{e(t),t!==n&&t.parentElement&&1===t.parentElement.childElementCount&&l(t.parentElement,e,n)}catch(t){}}var s="1.2a",c="prod";switch(c){case"preprod":"https://static-preprod.retail-spot.io/";break;case"prod":"https://static.retail-spot.io/";break;default:"http://localhost:3000/dist/"}var u={WARN:"warn",ERROR:"error",DEFAULT:"log"};function d(){for(var t,e=u.DEFAULT,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];if([u.WARN,u.ERROR,u.DEFAULT].includes(i[0])&&(e=i.shift()),e!==u.DEFAULT||"prod"!==c||"true"===(r="rsp_debug",a=null,l=[],window.location.search.substring(1).split("&").forEach((function(t){(l=t.split("="))[0].toLowerCase()===r.toLowerCase()&&(a=decodeURIComponent(l[1]))})),a)){var r,a,l;(t=console)[e].apply(t,["%cRetailSpot","padding:2px 6px;border-radius:8px;background-color:#1a2691;color:white",i.shift()].concat(i))}}d("env : ".concat(c)),d("Script version: ".concat(s));var h={VIDEO:"video",NATIVE:"native",BANNER:"banner"},f={AUTO:"auto",AUTO_NO_SLIDER:"autoNoSlider",SLIDER:"slider",INTEXT:"intext",INGRID:"ingrid"},p={closeButton:!0,soundButton:!0,height:225,width:400},y={ingridSize:1,enlargeVideo:!1,closeButton:!1,soundButton:!0,height:null,width:null,videoBackground:"transparent",videoFit:"cover",sponsoredAlign:"bottom",sponsoredLabel:"Annonce"},g={ingridSize:1,enlargeVideo:!1,closeButton:!1,soundButton:!0,height:null,width:null,videoBackground:"transparent",videoFit:""},v={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog",AdProgress:"AdProgress"};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==m(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===m(r)?r:String(r)),i)}var o,r}var A=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.video=e,this.adContainer=n,this.elapsed=0,this.duration=-1,this.hasCompletedOnce=!1,this.listeners={},this.sentEvents=[]}var e,n,i;return e=t,n=[{key:"handshakeVersion",value:function(){return"2.0"}},{key:"initAd",value:function(){throw new Error("initAd not implemented")}},{key:"startAd",value:function(){this.video.style.display="",this.adContainer.style.display=""}},{key:"stopAd",value:function(){throw new Error("stopAd not implemented")}},{key:"skipAd",value:function(){throw new Error("skipAd not implemented")}},{key:"pauseAd",value:function(){throw new Error("pauseAd not implemented")}},{key:"resumeAd",value:function(){throw new Error("resumeAd not implemented")}},{key:"getRemainingTime",value:function(){return this.duration-this.elapsed}},{key:"mute",value:function(t){throw new Error("mute not implemented")}},{key:"expandAd",value:function(){throw new Error("expandAd not implemented")}},{key:"collapseAd",value:function(){throw new Error("collapseAd not implemented")}},{key:"getAdVolume",value:function(){throw new Error("getAdVolume not implemented")}},{key:"getAdDuration",value:function(){throw new Error("getAdDuration not implemented")}},{key:"getAdRemainingTime",value:function(){throw new Error("getAdRemainingTime not implemented")}},{key:"getAdElapsedTime",value:function(){return this.getAdDuration()-this.getAdRemainingTime()}},{key:"getAdProgress",value:function(){return Math.round(100*(this.getAdElapsedTime()/this.getAdDuration()+Number.EPSILON))}},{key:"resizeAd",value:function(){}},{key:"subscribe",value:function(t,e){if(this.listeners[e]||(this.listeners[e]=[]),"function"!=typeof t)throw new Error("Callback is not a function for event: ".concat(e));this.listeners[e].push(t)}},{key:"unsubscribe",value:function(t,e){if(this.listeners[e]){var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}}},{key:"triggerEvent",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n.shift();null===(t=this.listeners[o])||void 0===t||t.forEach((function(t){t.apply(void 0,n)})),this.sentEvents.push(o)}},{key:"triggerOnce",value:function(){var t=arguments.length<=0?void 0:arguments[0];this.sentEvents.includes(t)||this.triggerEvent.apply(this,arguments)}}],n&&b(e.prototype,n),i&&b(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==w(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===w(r)?r:String(r)),i)}var o,r}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function O(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==C(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==C(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===C(r)?r:String(r)),i)}var o,r}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=I(t);if(e){var o=I(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(r,t);var e,n,i,o=j(r);function r(t,e,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(a=o.call(this,t,e,n)).id="BaseFormat",a.config=i,a.video=e,a.adContainer=n,a.playerDiv=document.createElement("div"),a.playerDiv.setAttribute("id","rsplayer"),a.playerDiv.style.position="relative",a.playerDiv.style.margin="auto",a.video.volume=0,a.video.style.width="100%",a.video.style.height="100%",a.video.style.position="absolute",a.video.style.top="0px",a.video.style.left="0px",a.video.style.backgroundColor=i.videoBackground||"transparent",i.videoFit&&(a.video.style.objectFit=i.videoFit),a.adContainer.style.width="100%",a.adContainer.style.height="100%",a.adContainer.style.position="absolute",a.adContainer.style.top="0px",a.adContainer.style.left="0px",a.playerDiv.appendChild(a.video),a.playerDiv.appendChild(a.adContainer),window.setTimeout((function(){a.insertPlayer(i.positionSelector,i.target)}),0),a}return e=r,(n=[{key:"insertPlayer",value:function(t,e){(e=e||window.document.querySelector(t))&&e.appendChild(this.playerDiv)}},{key:"initAd",value:function(t,e,n,i,o,a){t&&(this.playerDiv.style.width="".concat(t,"px")),e&&(this.playerDiv.style.height="".concat(e,"px")),P(I(r.prototype),"initAd",this).call(this,t,e,n,i,o,a)}},{key:"resizeAd",value:function(t,e,n){this.playerDiv.style.width="".concat(t,"px"),this.playerDiv.style.height="".concat(e,"px"),P(I(r.prototype),"resizeAd",this).call(this,t,e,n)}},{key:"onAdLoaded",value:function(){P(I(r.prototype),"onAdLoaded",this).call(this),this.startAd()}}])&&O(e.prototype,n),i&&O(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(r,t);var e,n,i,o=k(r);function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);for(var e=null,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i[0]&&r.checkVPAIDInterface(i[0])&&(e=i.shift()),(t=o.call.apply(o,[this].concat(i))).id="VPAIDWrapper",e&&t.setVPAIDCreative(e),t}return e=r,n=[{key:"setVPAIDCreative",value:function(t){this.creative=t,r.checkVPAIDInterface(t)?this.setCallbacksForCreative():d(u.ERROR,"VPAIDCreative doesn't conform to the VPAID spec")}},{key:"setCallbacksForCreative",value:function(){var t=this,e={AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog,AdProgress:this.onAdProgress};Object.keys(e).forEach((function(n){t.creative.subscribe(e[n].bind(t),n,t)}))}},{key:"initAd",value:function(t,e,n,i,o,r){this.playerWidth=t,this.playerHeight=e,this.creative.initAd(t,e,n,i,o,r)}},{key:"getInnerCreative",value:function(){var t;return"function"==typeof(null===(t=this.creative)||void 0===t?void 0:t.getInnerCreative)?this.creative.getInnerCreative():this}},{key:"onAdPaused",value:function(){this.log("onAdPaused"),this.triggerEvent(v.AdPaused)}},{key:"onAdPlaying",value:function(){this.log("onAdPlaying"),this.triggerEvent(v.AdPlaying)}},{key:"onAdError",value:function(t){d("onAdError: ".concat(t)),this.triggerEvent(v.AdError,t)}},{key:"onAdLog",value:function(t){this.log("onAdLog: ".concat(t)),this.triggerEvent(v.AdLog,t)}},{key:"onAdProgress",value:function(t){this.log("onAdProgress: ".concat(t)),this.triggerEvent(v.AdProgress,t)}},{key:"onAdUserAcceptInvitation",value:function(){this.log("onAdUserAcceptInvitation"),this.triggerEvent(v.AdUserAcceptInvitation)}},{key:"onAdUserMinimize",value:function(){this.log("onAdUserMinimize"),this.triggerEvent(v.AdUserMinimize)}},{key:"onAdUserClose",value:function(){this.log("onAdUserClose"),this.triggerEvent(v.AdUserClose)}},{key:"onAdSkippableStateChange",value:function(){this.log("Ad Skippable State Changed to: ".concat(this.creative.getAdSkippableState())),this.triggerEvent(v.AdSkippableStateChange)}},{key:"onAdExpandedChange",value:function(){this.log("Ad Expanded Changed to: ".concat(this.creative.getAdExpanded())),this.triggerEvent(v.AdExpandedChange)}},{key:"getAdExpanded",value:function(){return this.log("getAdExpanded"),this.creative.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return this.log("getAdSkippableState"),this.creative.getAdSkippableState()}},{key:"onAdSizeChange",value:function(){this.log("Ad size changed to: w=".concat(this.creative.getAdWidth()," h =").concat(this.creative.getAdHeight()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[v.AdSizeChange].concat(e))}},{key:"onAdDurationChange",value:function(){this.log("Ad Duration Changed to: ".concat(this.creative.getAdDuration())),this.duration=this.getAdDuration();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[v.AdDurationChange].concat(e))}},{key:"onAdRemainingTimeChange",value:function(){d("Ad Remaining Time Changed to: ".concat(this.creative.getAdRemainingTime()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[v.AdRemainingTimeChange].concat(e))}},{key:"getAdRemainingTime",value:function(){return this.creative.getAdRemainingTime()}},{key:"getAdDuration",value:function(){return this.creative.getAdDuration()}},{key:"onAdImpression",value:function(){this.log("Ad Impression"),this.triggerEvent(v.AdImpression)}},{key:"onAdClickThru",value:function(t,e,n){this.log("Clickthrough portion of the ad was clicked"),this.triggerEvent(v.AdClickThru)}},{key:"onAdInteraction",value:function(t){this.log("A non-clickthrough event has occured"),this.triggerEvent(v.AdInteraction)}},{key:"onAdVideoStart",value:function(){this.log("Video 0% completed"),this.triggerEvent(v.AdVideoStart)}},{key:"onAdVideoFirstQuartile",value:function(){this.log("Video 25% completed"),this.triggerEvent(v.AdVideoFirstQuartile)}},{key:"onAdVideoMidpoint",value:function(){this.log("Video 50% completed"),this.triggerEvent(v.AdVideoMidpoint)}},{key:"onAdVideoThirdQuartile",value:function(){this.log("Video 75% completed"),this.triggerEvent(v.AdVideoThirdQuartile)}},{key:"onAdVideoComplete",value:function(){this.log("Video 100% completed"),this.triggerEvent(v.AdVideoComplete)}},{key:"onAdLinearChange",value:function(){this.log("Ad linear has changed: ".concat(this.creative.getAdLinear()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[v.AdLinearChange].concat(e))}},{key:"getAdLinear",value:function(){return this.log("getAdLinear"),this.creative.getAdLinear()}},{key:"startAd",value:function(){this.log("startAd"),this.creative.startAd()}},{key:"onAdLoaded",value:function(){this.log("Ad has been loaded"),this.triggerEvent(v.AdLoaded)}},{key:"onAdStarted",value:function(){this.log("Ad has started"),this.triggerEvent(v.AdStarted)}},{key:"stopAd",value:function(){this.creative.stopAd()}},{key:"onAdStopped",value:function(){this.log("Ad has stopped"),this.triggerEvent(v.AdStopped)}},{key:"onAdSkipped",value:function(){this.log("Ad was skipped"),this.triggerEvent(v.AdSkipped)}},{key:"setAdVolume",value:function(t){this.creative.setAdVolume(t)}},{key:"getAdVolume",value:function(){return this.creative.getAdVolume()}},{key:"onAdVolumeChange",value:function(){this.log("Ad Volume has changed to - ".concat(this.creative.getAdVolume()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[v.AdVolumeChange].concat(e))}},{key:"resizeAd",value:function(t,e,n){this.creative.resizeAd(t,e,n)}},{key:"pauseAd",value:function(){this.creative.pauseAd()}},{key:"resumeAd",value:function(){this.creative.resumeAd()}},{key:"expandAd",value:function(){this.creative.expandAd()}},{key:"collapseAd",value:function(){this.creative.collapseAd()}},{key:"log",value:function(t){d("[".concat(this.id.substring(0,11),"] \t- ").concat(t))}}],i=[{key:"checkVPAIDInterface",value:function(t){return!!(t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe)}}],n&&S(e.prototype,n),i&&S(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(A));function R(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function V(){function t(t,e){var n=[],i=-1;return t.forEach((function(t){var o,r,a,l,s=t.getBoundingClientRect();if(s&&!["A","NOSCRIPT","IMG"].includes(t.nodeName)){var c=s.width,u=s.x,d=s.x+s.width;c>e&&c<900&&(-1===i&&(i=c),c===i&&u>-20&&d<=window.innerWidth+20&&(o=t,r=o.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop,{top:r.top+l,left:r.left+a,right:r.left+a+r.width,bottom:r.top+l+r.height}).bottom>window.innerHeight/2&&n.push(t))}})),n}function e(n,i){var o,r=i,a=parseInt(window.innerWidth,10)/2,l=Array.from(n.children),s=t(l,a);s.length>1&&(o=r).push.apply(o,R(s));return l.forEach((function(t){var n=t.getBoundingClientRect().width;t.children.length>0&&n>a&&(r=e(t,r))})),r}return new Promise((function(t,n){var i=e(window.document.body,[]);0===i.length&&n(new Error("AutoPositioning: Target Not found.")),o((function(){t(r(i))}))}))}function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==N(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===N(r)?r:String(r)),i)}var o,r}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},U.apply(this,arguments)}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=H(t);if(e){var o=H(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(r,t);var e,n,i,o=_(r);function r(t,e,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(a=o.call(this,t,e,n,i)).id="IntextFormat",a.speed=.7,a.animatedDiv=document.createElement("div"),a.animatedDiv.style.overflow="hidden",a.animatedDiv.style.height="0px",a.animatedDiv.style.width="100%",a.animatedDiv.style.transition="height ease ".concat(a.speed,"s"),a.waitToStart=!1,a.adLoaded=!1,a}return e=r,(n=[{key:"insertPlayer",value:function(t,e){var n=this,i=function(t){n.playerDiv.style.margin="auto",n.animatedDiv.appendChild(n.playerDiv),t.appendChild(n.animatedDiv),n.startAd()};(e=e||window.document.querySelector(t))?i(e):V().then((function(t){d(u.DEBUG,"Autopositioning : ",t),i(t)})).catch((function(t){d(u.DEBUG,"Autopositioning : ",t.message)}))}},{key:"initAd",value:function(t,e,n,i,o,a){U(H(r.prototype),"initAd",this).call(this,t,e,n,i,o,a)}},{key:"onAdLoaded",value:function(){this.adLoaded=!0,U(H(r.prototype),"onAdLoaded",this).call(this)}},{key:"startAd",value:function(){this.animatedDiv.parentElement&&this.adLoaded?U(H(r.prototype),"startAd",this).call(this):this.waitToStart=!0}},{key:"onAdStarted",value:function(){U(H(r.prototype),"onAdStarted",this).call(this),this.open()}},{key:"open",value:function(){this.animatedDiv.style.height=this.playerDiv.style.height}},{key:"close",value:function(){var t=this;this.animatedDiv.style.height="0px",window.setTimeout((function(){t.animatedDiv.parentElement&&t.animatedDiv.parentElement.removeChild(t.animatedDiv)}),1e3*this.speed)}},{key:"onAdStopped",value:function(){U(H(r.prototype),"onAdStopped",this).call(this),this.close()}},{key:"onAdVideoComplete",value:function(){U(H(r.prototype),"onAdVideoComplete",this).call(this),this.close()}}])&&M(e.prototype,n),i&&M(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(D);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return(e=$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,$(i.key),i)}}function $(t){var e=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==F(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===F(e)?e:String(e)}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Z.apply(this,arguments)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=J(t);if(e){var o=J(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(r,t);var e,n,i,o=Y(r);function r(t,e,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(a=o.call(this,t,e,n,i)).id="SliderFormat",a.vmargin="number"==typeof i.vmargin?i.vmargin:30,a.hmargin="number"==typeof i.hmargin?i.hmargin:30,a.speed=.7,a.playerDiv.style.position="fixed",a.playerDiv.style.zIndex=1e6,a.playerDiv.style.transition="top ease ".concat(a.speed,"s, left ease ").concat(a.speed,"s, right ease ").concat(a.speed,"s, bottom ease ").concat(a.speed,"s"),a.playerDiv.style.boxShadow="rgba(0, 0, 0, 0.7) 0px 0px 20px",a.setPositions(i),a.applyPosition(a.startPosition),a}return e=r,(n=[{key:"insertPlayer",value:function(t){window.document.body.appendChild(this.playerDiv)}},{key:"setPositions",value:function(t){var e,n,i="right";this.vmargin<this.hmargin&&(i="bottom");var o=window.innerHeight-t.height-this.vmargin;(null===(e=t.align)||void 0===e?void 0:e.indexOf("top"))>=0&&(o=this.vmargin,this.vmargin<this.hmargin&&(i="top"));var r,a=window.innerWidth-t.width-this.hmargin;switch((null===(n=t.align)||void 0===n?void 0:n.indexOf("left"))>=0&&(a=this.hmargin,this.vmargin>=this.hmargin&&(i="left")),this.targetPosition={top:"".concat(o,"px"),left:"".concat(a,"px")},t.anim||i){case"top":r={top:"".concat(-t.height,"px")};break;case"left":r={left:"".concat(-t.width,"px")};break;case"bottom":r={top:"".concat(parseInt(t.height,10)+parseInt(window.innerHeight,10),"px")};break;case"right":r={left:"".concat(parseInt(t.width,10)+parseInt(window.innerWidth,10),"px")}}this.startPosition=W(W({},this.targetPosition),r)}},{key:"applyPosition",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.playerDiv.style[n]=t[n]}))}},{key:"initAd",value:function(t,e,n,i,o,a){Z(J(r.prototype),"initAd",this).call(this,t,e,n,i,o,a)}},{key:"onAdLoaded",value:function(){Z(J(r.prototype),"onAdLoaded",this).call(this),this.applyPosition(this.targetPosition)}},{key:"close",value:function(){var t=this;this.applyPosition(this.startPosition),window.setTimeout((function(){window.document.body.removeChild(t.playerDiv)}),1e3*this.speed)}},{key:"onAdStopped",value:function(){Z(J(r.prototype),"onAdStopped",this).call(this),this.close()}},{key:"onAdVideoComplete",value:function(){Z(J(r.prototype),"onAdVideoComplete",this).call(this),this.close()}}])&&Q(e.prototype,n),i&&Q(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(D),tt=new RegExp(["€","$","£","%"].map((function(t){return"\\".concat(t)})).join("|")),et=null;function nt(t){return tt.test(t)}function it(t,e,n){if(!t||"A"!==t.nodeName&&"DIV"!==t.nodeName&&"LI"!==t.nodeName&&"ARTICLE"!==t.nodeName)return!1;var i=0,o=0,r=0;try{var a=getComputedStyle(t);i=Math.floor(parseInt(a.width,10)),o=Math.floor(parseInt(a.height,10)),r=Math.floor(t.offsetTop);var l=i>10&&o>10,s=e&&Math.abs(i-e)>10&&n&&Math.abs(o-n)>10;if(!l||s)return!1}catch(t){return!1}return{hasPrice:nt(t.innerText),width:i,height:o,top:r}}function ot(t){if(!et||t){var e=t?[t]:Array.from(document.querySelectorAll("div:has(> *:nth-child(4)), ul:has(> *:nth-child(4)), section:has(> *:nth-child(4))")),n=null,i=null,o=!1;e.length>0&&(i=e.find((function(t){var e;if("absolute"===t.style.position||"fixed"===t.style.position||"none"===t.style.display||null===t.offsetParent)return!1;var i=0,r=0;o=!1;for(var a=[[]],l=a[0],s=0,c=0,u=t.firstElementChild,d=null===(e=u)||void 0===e?void 0:e.offsetTop,h=!1;u&&r<2;){var f=it(u,s,c);f?(h=h||f.hasPrice,!o&&f.hasPrice&&(o=u),s=f.width,c=f.height,d!==f.top&&(l=[],a.push(l),d=f.top),l.push(f),u=u.nextElementSibling,i+=1,r=0):r+=1}return n=a,i>3&&h})));var r=i;d(u.DEBUG,"Retail tools, Found item grid: ",r),d(u.DEBUG,"Grid: ",n),et={itemList:r,gridProfile:n,clonedElement:o}}return et}function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function at(t){return function(t){if(Array.isArray(t))return lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===rt(r)?r:String(r)),i)}var o,r}var ct=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.readOnly=i,this.sponsoredAlign=n,this.title=null,this.desc=null,this.ctatext=null,this.sponsoredBy=null,this.price=null,this.img=null,this.brandImg=null,this.sponsoredLabel=null,this.link=null,this.buttonsEls=[],this.textEls=[],this.imgEls=[],this.pricesEls=[],this.descEls=[],this.garbageEls=[],this.aEls=[],this.applyChange((function(){e.onclick=function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()}}))}var e,i,o;return e=t,i=[{key:"isImg",value:function(t){return 1===t.children.length&&"svg"===t.children[0].nodeName||"IMG"===t.nodeName||"PICTURE"===t.nodeName||t.style.background.includes("url(")}},{key:"fetchLink",value:function(t){if(this.isLink(t)){this.aEls.push(t);var e=window.getComputedStyle(t);t.area=parseInt(e.width,10)*parseInt(e.height,10)}}},{key:"isLink",value:function(t){return"A"===t.nodeName}},{key:"isText",value:function(t){if(t.canBeIgnored)return!1;var e=Array.from(t.childNodes).filter((function(t){return"svg"!==t.nodeName}));if(1===e.length&&3!==e[0].nodeType)return!1;var n=!1,i=0;if(e.forEach((function(t){var e;3!==t.nodeType&&"SPAN"!==t.nodeName||(i+=(null===(e=t.textContent)||void 0===e?void 0:e.trim().length)||0)})),i>1){var o,r=!0;e.forEach((function(t,e,n){["SUP","EM","SPAN","A","STRONG","SVG","svg","#text"].includes(t.nodeName)||t instanceof Element&&"inline"===window.getComputedStyle(t).display||(r=!1)})),r&&(t.originalValue=t.innerText,e.forEach((function(t){t.canBeIgnored=!0})),this.applyChange((function(){t.innerHTML=t.innerText}))),n=!0,"SUP"===(null===(o=t.nextSibling)||void 0===o?void 0:o.nodeName)&&(this.applyChange((function(){t.innerHTML+=t.nextSibling.innerText})),t.originalValue=t.innerHTML+t.nextSibling.innerText)}else 1===i&&this.garbageEls.push(t);return n}},{key:"isDesc",value:function(t){return t.height>=2*t.lineHeight}},{key:"isButton",value:function(t){for(var e=!1,n=t;!e&&n.children.length<=1;){var i=window.getComputedStyle(n);e=!i.background.includes("rgba(0, 0, 0, 0)")&&!i.background.includes("url("),n=n.parentElement}return e}},{key:"isPrice",value:function(t){var e=(t.originalValue||t.innerText).replace("dès","").replace("à partir de","");return e.length<=10&&!Number.isNaN(parseInt(e,10))&&nt(e)}},{key:"isOrContainElements",value:function(t){return this.title&&(this.title===t||t.contains(this.title))||this.desc&&(this.desc===t||t.contains(this.desc))||this.ctatext&&(this.ctatext===t||t.contains(this.ctatext))||this.sponsoredBy&&(this.sponsoredBy===t||t.contains(this.sponsoredBy))||this.price&&(this.price===t||t.contains(this.price))||this.img&&(this.img===t||t.contains(this.img))||this.brandImg&&(this.brandImg===t||t.contains(this.brandImg))||this.sponsoredLabel&&(this.sponsoredLabel===t||t.contains(this.sponsoredLabel))}},{key:"removeLineThrough",value:function(t){var e=this;a(t,(function(t){0===window.getComputedStyle(t).textDecoration.indexOf("line-through")&&e.applyChange((function(){t.style.textDecoration="none"}))}),(function(t){return t===e.container}))}},{key:"applyChange",value:function(t){this.readOnly||t()}},{key:"fetchElements",value:function(){var t=this;this.fetchLink(this.container);var e=this.container.querySelectorAll("*"),n=Array.from(e);n.forEach((function(e){if(e.childNodes.length>1&&e.childNodes.forEach((function(e){"svg"===e.nodeName&&t.applyChange((function(){e.style.visibility="hidden"}))})),"SUP"===e.nodeName&&t.applyChange((function(){e.style.display="none"})),e.offsetParent)if(t.fetchLink(e),t.isText(e)){var n,i=window.getComputedStyle(e);e.fontSize=parseInt(i.fontSize,10),e.lineHeight=parseInt(i.lineHeight,10),e.height=parseInt(i.height,10),e.computedColor=i.color,e.fontWeight=i.fontWeight,t.removeLineThrough(e),e.rotate=null===(n=i.transform)||void 0===n?void 0:n.includes("matrix"),e.isSquare=parseInt(i.width,10)-parseInt(i.height,10)<3,e.rotate||e.isSquare?t.garbageEls.push(e):t.isPrice(e)?t.pricesEls.push(e):t.isButton(e)?t.buttonsEls.push(e):t.textEls.push(e)}else if(t.isImg(e)){var o=window.getComputedStyle(e);e.compWidth=o.width,e.compHeight=o.height,e.compBackground=o.background,e.compMargin=o.margin,e.compMarginLeft=o.marginLeft,e.compMarginRight=o.marginRight,e.area=parseInt(o.width,10)*parseInt(o.height,10),t.imgEls.push(e)}else e.childNodes.forEach((function(n){3===n.nodeType&&n.textContent.trim().length>0&&(e.origHeight||(e.origHeight=window.getComputedStyle(e).height),t.applyChange((function(){n.nodeValue=""})))})),e.origHeight&&t.applyChange((function(){e.style.height=e.origHeight}))})),this.aEls.sort((function(t,e){return e.area-t.area})),this.link=this.aEls.shift(),this.imgEls.sort((function(t,e){return e.area-t.area})),this.img=this.imgEls.shift(),this.brandImg=this.imgEls.shift();var i=function(t,e){if(!t.rotate&&e.rotate)return-1;if(t.rotate&&!e.rotate)return 1;var n=0;return 0==(n=e.fontSize-t.fontSize)&&(n=e.fontWeight-t.fontWeight),0===n&&(n=t.offsetTop-e.offsetTop),n};this.textEls.sort(i),this.title=this.textEls.shift(),this.textEls.sort((function(t,e){return e.innerText.trim().length-t.innerText.trim().length})),this.desc=this.textEls.shift(),this.sponsoredBy=this.textEls.shift(),this.buttonsEls.sort(i),this.ctatext=this.buttonsEls.shift(),this.pricesEls.sort((function(t,e){return t.innerText.includes("%")&&!e.innerText.includes("%")?1:!t.innerText.includes("%")&&e.innerText.includes("%")?-1:i(t,e)})),this.price=this.pricesEls.shift(),this.garbageEls=this.garbageEls.concat(n.filter((function(e){return!t.isOrContainElements(e)}))),this.applyChange((function(){t.hideUnused([].concat(at(t.imgEls),at(t.textEls),at(t.pricesEls),at(t.buttonsEls),at(t.garbageEls)))})),d(u.DEBUG,"title : ",this.title),d(u.DEBUG,"description : ",this.desc),d(u.DEBUG,"ctaText : ",this.ctatext),d(u.DEBUG,"brand : ",this.sponsoredBy),d(u.DEBUG,"price : ",this.price),d(u.DEBUG,"img : ",this.img),d(u.DEBUG,"brandImg : ",this.brandImg),d(u.DEBUG,"Link : ",this.link)}},{key:"hideUnused",value:function(t){var e=this;t.forEach((function(t){l(t,(function(t){t.style.visibility="hidden"}),e.container)}))}},{key:"scaleWidth",value:function(t){var e=this;t>1&&this.img&&a(this.img,(function(e){var i=n(e);e.style.minWidth="".concat(Math.floor(i.width*t),"px")}),(function(t){return t===e.container}))}},{key:"fillText",value:function(t,e){t&&(e?t.innerText=e:l(t,(function(t){t.style.visibility="hidden"}),this.container))}},{key:"fillImg",value:function(t,e){var n=!1;t&&(e&&(t.style.width=t.compWidth,t.style.height=t.compHeight,"IMG"===t.nodeName?(t.style.objectFit="cover",t.src=e,n=!0):t.compBackground.includes("url(")?(t.style.background=t.compBackground.replace(/(.*url\()([^)"']*)(\).*)/,"$1".concat(e,"$3")),n=!0):"PICTURE"===t.nodeName&&Array.from(t.children).forEach((function(t){"IMG"===t.nodeName?(t.style.objectFit="cover",t.src=e,n=!0):"SOURCE"===t.nodeName&&(t.setAttribute("srcset",e),n=!0)}))),n||l(t,(function(t){t.style.visibility="hidden"}),this.container))}},{key:"applyValues",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fillText(this.title,n.title),this.fillText(this.desc,n.desc),this.fillText(this.ctatext,n.ctatext),this.fillText(this.sponsoredBy,n.sponsoredBy||n.domain),this.fillText(this.price,n.price),this.fillText(this.sponsoredLabel,n.sponsoredLabel||"Sponsorisé"),this.fillImg(this.img,null===(t=n.image)||void 0===t?void 0:t.url),this.fillImg(this.brandImg,null===(e=n.brandLogo)||void 0===e?void 0:e.url)}},{key:"replaceImg",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==(e=this.img)&&void 0!==e&&e.parentElement){var i=this.img;"PICTURE"===this.img.parentElement.nodeName&&(i=this.img.parentElement);var o=null;a(i,(function(t){o=t.getBoundingClientRect()}),(function(t){return o.width>50&&o.height>50}));var r=document.createElement("DIV");if(i.parentElement.replaceChild(r,i),r.style.width="".concat(o.width,"px"),r.style.height="".concat(o.height,"px"),r.style.position=this.img.style.position,r.style.left=this.img.style.left,r.style.top=this.img.style.top,r.style.right=this.img.style.right,r.style.bottom=this.img.style.bottom,t.style.width="".concat(o.width,"px"),t.style.height="".concat(o.height,"px"),n)if(parseInt(this.img.compMarginLeft,10)){var l=o.width+parseInt(this.img.compMarginLeft,10)+parseInt(this.img.compMarginRight,10);r.style.width="".concat(l,"px"),t.style.width="".concat(l,"px"),r.style.left="0px",r.style.right="0px",r.style.margin="Opx auto",t.style.margin="0px"}else{var s=16/9*o.height;r.style.width="".concat(s,"px"),t.style.width="".concat(s,"px"),r.style.left="0px",r.style.right="0px",r.style.margin="Opx auto",t.style.margin="0px"}else r.style.margin="0px"===this.img.compMargin?"auto":this.img.compMargin;r.appendChild(t)}}},{key:"setAdOverlay",value:function(t){var e=this;this.overlay=document.createElement("div"),this.container.style.position||(this.container.style.position="relative");var n=this.overlay.style;if(n.position="absolute",n.top="0px",n.left="0px",n.width="100%",n.height="100%",n.cursor="pointer",this.overlay.addEventListener("click",(function(n){t.url&&window.open(t.url,"_blank"),"function"==typeof e.onclick&&e.onclick(n)})),!this.sponsoredLabel){var i=document.createElement("div");i.style.color="#595959",i.style.position="absolute",i.style.width="100%",i.style.padding="0px 10px",this.sponsoredAlign.indexOf("bottom")>-1?i.style.bottom="10px":i.style.top="10px";var o="center";this.sponsoredAlign.indexOf("left")>-1?o="left":this.sponsoredAlign.indexOf("right")>-1&&(o="right"),i.style.textAlign=o,i.innerText=t.sponsoredLabel,this.overlay.appendChild(i)}if(t.privacyIcon){var r=document.createElement("img");r.style.position="absolute",r.style.top="0px",r.style.right="0px",r.style.width="20px",r.style.height="20px",r.src=t.privacyIcon,t.privacyUrl&&r.addEventListener("click",(function(){window.open(t.privacyUrl,"_blank")})),this.overlay.appendChild(r)}this.container.appendChild(this.overlay)}},{key:"insertNativeAd",value:function(t){this.applyValues(t),this.setAdOverlay(t)}},{key:"addOverlayElement",value:function(t,e){null!==t.parentElement&&t.parentElement.removeChild(t),this.overlay.appendChild(t),t.style.position="absolute",t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.left="".concat(e.left,"px"),t.style.top="".concat(e.top,"px")}},{key:"getImgSrc",value:function(){var t=null;if(this.img)if("IMG"===this.img.nodeName)t=this.img.src;else if("PICTURE"===this.img.nodeName){var e,n=this.img.querySelector("source");t=(null==n?void 0:n.getAttribute("srcset"))||(null===(e=this.img.querySelector("img"))||void 0===e?void 0:e.src)}return t}},{key:"getDescriptiveText",value:function(){var t,e,n=null===(t=this.title)||void 0===t?void 0:t.innerText,i=null===(e=this.desc)||void 0===e?void 0:e.innerText;return n.length<6&&i&&(n=i),n}}],i&&st(e.prototype,i),o&&st(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ut(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"top",a=new ct((i=i||t).cloneNode(!0),r);if(a.container.widthRatio=o,e.insertBefore(a.container,t.nextSibling),a.fetchElements(),o>1&&a.scaleWidth(o),n[0].length>1){var l=n[0].length,s=0;Array.from(e.children).forEach((function(t){t.style.clear=s%l==0?"left":"none",s+=t.widthRatio||1}))}return a}function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==dt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===dt(r)?r:String(r)),i)}var o,r}function ft(){return ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gt(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ft.apply(this,arguments)}function pt(t,e){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pt(t,e)}function yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gt(t);if(e){var o=gt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function gt(t){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gt(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pt(t,e)}(s,t);var e,i,a,l=yt(s);function s(t,e,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(o=l.call(this,t,e,n,i)).id="IngridFormat",o.speed=.7,o.animatedDiv=document.createElement("div"),o.animatedDiv.style.overflow="hidden",o.animatedDiv.style.height="100%",o.animatedDiv.style.width="0px",o.animatedDiv.style.transition="width ease ".concat(o.speed,"s"),o.waitToStart=!1,o.adLoaded=!1,o}return e=s,i=[{key:"callStart",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.placeholder=ut(t,e,i,o,Math.min(i[0].length,this.config.ingridSize),this.config.sponsoredAlign);var r=n(this.placeholder.container);this.resizeAd(r.width,r.height,"normal"),this.placeholder.container.style.minHeight="".concat(r.height,"px"),this.placeholder.container.replaceChildren(this.animatedDiv),this.placeholder.applyValues(),this.playerDiv.style.margin="auto",this.animatedDiv.appendChild(this.playerDiv),this.startAd()}},{key:"insertPlayer",value:function(t){var e=this,n=ot(window.document.querySelector(t)),i=n.itemList,a=n.gridProfile,l=n.clonedElement;i?o((function(){var t=a[0].length,n=0;"right"===e.config.align?n=t-parseInt(e.config.ingridSize,10)-1:"center"===e.config.align&&(n=Math.floor((t-1)/2));var o=Array.from(i.children);t>1&&(o=Array.from(i.children).filter((function(e,i){return i%t===n})));var s=r(o);e.itemList=i,e.gridProfile=a,e.callStart(s,i,a,l)})):d(u.DEBUG,"Cannot find retail item grid.")}},{key:"initAd",value:function(t,e,n,i,o,r){ft(gt(s.prototype),"initAd",this).call(this,t,e,n,i,o,r)}},{key:"onAdLoaded",value:function(){this.adLoaded=!0,ft(gt(s.prototype),"onAdLoaded",this).call(this)}},{key:"startAd",value:function(){this.adLoaded?ft(gt(s.prototype),"startAd",this).call(this):this.waitToStart=!0}},{key:"onAdStarted",value:function(){ft(gt(s.prototype),"onAdStarted",this).call(this),this.open()}},{key:"open",value:function(){this.animatedDiv.style.width=this.playerDiv.style.width}},{key:"close",value:function(){var t=this;this.animatedDiv.style.width="0px",window.setTimeout((function(){var e;null!==(e=t.placeholder.container)&&void 0!==e&&e.parentElement&&function(t,e,n){if(t.parentElement.removeChild(t),n[0].length>1){var i=n[0].length;Array.from(e.children).forEach((function(t,e){t.style.clear=e%i==0?"left":"none"}))}}(t.placeholder.container,t.itemList,t.gridProfile)}),1e3*this.speed)}},{key:"onAdStopped",value:function(){ft(gt(s.prototype),"onAdStopped",this).call(this),this.close()}},{key:"onAdVideoComplete",value:function(){ft(gt(s.prototype),"onAdVideoComplete",this).call(this),this.close()}}],i&&ht(e.prototype,i),a&&ht(e,a),Object.defineProperty(e,"prototype",{writable:!1}),s}(D);function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==mt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===mt(r)?r:String(r)),i)}var o,r}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},At(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=St(t);if(e){var o=St(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},St(t)}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(a,t);var e,i,o,r=wt(a);function a(t,e,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(o=r.call(this,t,e,n,i)).id="IngridNativeFormat",o}return e=a,i=[{key:"callStart",value:function(t,e,i){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.placeholder=ut(t,e,i,r,Math.min(i[0].length,this.config.ingridSize),this.config.sponsoredAlign);var a=n(this.placeholder.container);this.resizeAd(a.width,a.height,"normal"),this.placeholder.container.style.minHeight="".concat(a.height,"px"),this.placeholder.container.style.backgroundColor=this.config.bgColor||"transparent",this.placeholder.insertNativeAd({title:"Galaxy Z Flip 5G",price:"999 €",desc:"The shape of the future. Le Z FLip4 512Go au prix du 256Go !\nCoque au choix offerte",ctatext:"En savoir plus",domain:"Samsung",image:{url:"https://imgart.casino.fr/imageserver/MC2/8/196608_M1_T1.jpg"},brandLogo:{url:null},sponsoredLabel:this.config.sponsoredLabel}),this.placeholder.onclick=function(t){o.getInnerCreative().onAdClickThru()},this.placeholder.replaceImg(this.playerDiv,this.config.enlargeVideo);var l,s,c,u,d=(l=this.playerDiv,s=this.placeholder.container,c=s.getBoundingClientRect(),{width:(u=l.getBoundingClientRect()).width,height:u.height,top:u.top-c.top,right:u.right-c.right,bottom:u.bottom-c.bottom,left:u.left-c.left});this.placeholder.addOverlayElement(this.adContainer,d),this.playerDiv.style.margin="auto",this.startAd()}}],i&&bt(e.prototype,i),o&&bt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(vt);function kt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.AUTO,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.VIDEO;switch(t){case f.INTEXT:return z;case f.INGRID:return e===h.NATIVE?Et:vt;case f.SLIDER:return K;default:return D}}var xt='<svg xmlns="http://www.w3.org/2000/svg" height="{{HEIGHT}}px" viewBox="0 0 24 24" width="{{WIDTH}}px" fill="#FFFFFF"><path d="M0 0h24v24H0z" fill="none"/><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>',Ct='<svg xmlns="http://www.w3.org/2000/svg" height="{{HEIGHT}}px" viewBox="0 0 24 24" width="{{WIDTH}}px" fill="#FFFFFF"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>';function Ot(t,e,n){var i=document.createElement("div");return i.innerHTML=t.replace("{{HEIGHT}}",n||48).replace("{{WIDTH}}",e||48),i}function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==Pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Pt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Pt(r)?r:String(r)),i)}var o,r}var jt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioUrl=e,this.audio=new Audio(this.audioUrl),this.volume=1}var e,n,i;return e=t,(n=[{key:"play",value:function(){this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"handleToggleAdVolume",value:function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),0===this.volume?(this.soundon.style.display="",this.soundoff.style.display="none",this.volume=1):(this.soundon.style.display="none",this.soundoff.style.display="",this.volume=0),this.audio.volume=this.volume}},{key:"getSoundButton",value:function(t){return this.container=document.createElement("div"),this.container.style.width="".concat(t,"px"),this.container.style.height="".concat(t,"px"),this.soundon=Ot(Ct,t,t),this.soundon.onclick=this.handleToggleAdVolume.bind(this),this.soundon.style.position="absolute",this.soundon.style.right="8px",this.soundon.style.bottom="8px",this.soundon.style.cursor="pointer",this.soundon.style.display="",this.soundon.style.lineHeight="0px",this.soundon.style.backgroundColor="rgb(0 0 0 / 30%)",this.soundon.style.borderRadius="50px",this.soundon.style.padding="4px",this.container.appendChild(this.soundon),this.soundoff=Ot(xt,t,t),this.soundoff.onclick=this.handleToggleAdVolume.bind(this),this.soundoff.style.position="absolute",this.soundoff.style.right="8px",this.soundoff.style.bottom="8px",this.soundoff.style.cursor="pointer",this.soundoff.style.display="none",this.soundoff.style.lineHeight="0px",this.soundoff.style.backgroundColor="rgb(0 0 0 / 30%)",this.soundoff.style.borderRadius="50px",this.soundoff.style.padding="4px",this.container.appendChild(this.soundoff),this.container}}])&&Tt(e.prototype,n),i&&Tt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==It(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==It(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===It(r)?r:String(r)),i)}var o,r}var Rt=function(){function t(e,n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentWidth=i,this.parentHeight=o,this.container=document.createElement("div"),this.container.setAttribute("id",e),this.container.style.position="absolute",this.container.style.top="0px",this.container.style.left="0px",this.container.style.width="100%",this.container.style.height="100%",this.container.style.transition="opacity 1s ease-in-out",this.container.style.opacity=n,this.backgroundImg=document.createElement("div"),this.backgroundImg.style.position="absolute",this.backgroundImg.style.left="-15%",this.backgroundImg.style.top="-15%",this.backgroundImg.style.width="130%",this.backgroundImg.style.height="130%",this.backgroundImg.style.maxWidth="130%",this.backgroundImg.style.maxHeight="130%",this.backgroundImg.style.backgroundSize="cover",this.backgroundImg.style.backgroundPosition="center",this.backgroundImg.style.filter="blur(20px)",this.img=document.createElement("img"),this.img.setAttribute("id","rsatv-img1"),this.img.style.position="absolute",this.img.style.top="0px",this.img.style.left="0px",this.img.style.width="100%",this.img.style.height="100%",this.img.style.objectFit="contain",this.transitionString="transform ".concat(r,"s ease-in-out"),a?this.container.style.backgroundColor=a:this.container.appendChild(this.backgroundImg),this.container.appendChild(this.img)}var e,n,i;return e=t,(n=[{key:"getElement",value:function(){return this.container}},{key:"setImageUrl",value:function(t){this.backgroundImg.style.backgroundImage="url(".concat(t,")"),this.img.src=t}},{key:"setOpacity",value:function(t){this.container.style.opacity=t}},{key:"prepareAnimation",value:function(){var t="scale(1)",e="scale(1.4)",n="translate(0px, 0px)",i="translate(0px, 0px)",o=this.naturalWidth/this.naturalHeight-this.parentWidth/this.parentHeight;if(Math.abs(o)<.2){var r=10*(Math.floor(3*Math.random())-1),a=10*(Math.floor(3*Math.random())-1);i="translate(".concat(r,"px, ").concat(a,"px)")}else if(o>0){var l=this.parentWidth/this.naturalWidth,s=this.naturalHeight*l,c=(this.parentHeight-s)/2;n="translate(0px, -".concat(c,"px)"),i="translate(0px, ".concat(c,"px)")}else if(o<0){var u=this.parentHeight/this.naturalHeight,d=this.naturalWidth*u,h=(this.parentWidth-d)/2;n="translate(-".concat(h,"px, 0px)"),i="translate(".concat(h,"px, 0px)")}var f="".concat(t," ").concat(n),p="".concat(e," ").concat(i);Math.floor(2*Math.random())&&(f="".concat(t," ").concat(i),p="".concat(e," ").concat(n)),Math.floor(2*Math.random())?(this.initialTransform=f,this.finalTransform=p):(this.initialTransform=p,this.finalTransform=f)}},{key:"animate",value:function(){var t=this;this.img.style.transition="",this.img.style.transform=this.initialTransform,window.getComputedStyle(this.img).height,window.setTimeout((function(){t.img.style.transition=t.transitionString,t.img.style.transform=t.finalTransform}),0)}},{key:"onceLoaded",value:function(){this.naturalWidth=this.img.naturalWidth,this.naturalHeight=this.img.naturalHeight,this.prepareAnimation(),this.onload&&window.setTimeout(this.onload,0)}},{key:"setOnLoadListener",value:function(t){this.onload=t,this.handler=this.onceLoaded.bind(this),this.img.addEventListener("load",this.handler)}},{key:"removeOnLoadListener",value:function(){this.img.removeEventListener("load",this.handler)}}])&&Dt(e.prototype,n),i&&Dt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==Lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Lt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Lt(r)?r:String(r)),i)}var o,r}var Nt=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.delay=e,this.color=n,this.text="";var o=Math.max(Math.min(parseInt(.047*i,10),30),12);this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.top="65%",this.container.style.left="0px",this.container.style.width="100%",this.container.style.height="35%",this.container.style.padding="10%",this.container.style.boxShadow="0 0 10px 10px #0005",this.container.style.backgroundColor="#0005",this.textElement=document.createElement("div"),this.textElement.style.position="absolute",this.textElement.style.top="0px",this.textElement.style.left="5%",this.textElement.style.maxWidth="80%",this.textElement.style.color="white",this.textElement.style.fontWeight="700",this.textElement.style.textDecoration="underline 5px ".concat(this.color),this.textElement.style.fontSize="".concat(o,"px"),this.textElement.style.lineHeight="".concat(o+6,"px"),this.container.appendChild(this.textElement)}var e,n,i;return e=t,(n=[{key:"showText",value:function(t){var e=this;this.textElement.textContent="",this.text=t,setTimeout((function(){e.appearLetter(0)}),this.delay)}},{key:"appearLetter",value:function(t){var e=this;t>=this.text.length||(this.textElement.textContent+=this.text[t],setTimeout((function(){e.appearLetter(t+1)}),50))}},{key:"getElement",value:function(){return this.container}}])&&Vt(e.prototype,n),i&&Vt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==Mt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Mt(r)?r:String(r)),i)}var o,r}var Bt=function(){function t(e,n,i,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i,this.height=o,this.bgColor=r,this.container=n,this.article=e,this.currentSection=this.article.firstSection,this.imgIndex=0,this.switchInd=0,this.init(a)}var e,n,i;return e=t,(n=[{key:"init",value:function(t){var e=this,n=this.article.firstSection.getImgUrl(0);this.img1=new Rt("rsatv-img1",1,this.width,this.height,14,this.bgColor),this.img2=new Rt("rsatv-img2",0,this.width,this.height,14,this.bgColor),this.text=new Nt(50,this.article.mainColor||"black",this.width);var i=18;this.width&&(i=Math.min(18,Math.min(32,this.width/10))),this.audio=new jt("https://retailspot.github.io/RSPlayer-Demo/samples/ClosertoSpace.mp3");var o=this.audio.getSoundButton(i);this.container.style.background=this.bgColor||"transparent",this.container.style.overflow="hidden",this.container.style.cursor="pointer",this.container.appendChild(this.img1.getElement()),this.container.appendChild(this.img2.getElement()),this.container.appendChild(this.text.getElement()),this.container.appendChild(o),this.img1.setOnLoadListener((function(){e.img1.removeOnLoadListener(),e.img1.animate(),t()})),this.img1.setImageUrl(n),this.text.showText(this.article.firstSection.getText())}},{key:"start",value:function(){this.intervalId=window.setInterval(this.switchImage.bind(this),11e3),this.audio.play()}},{key:"switchImage",value:function(){this.imgIndex+=1,this.switchInd+=1;var t=this.currentSection.getImgUrl(this.imgIndex);t||(this.currentSection=this.currentSection.next,this.currentSection?(this.text.showText(this.currentSection.getText()),this.imgIndex=0,t=this.currentSection.getImgUrl()):this.end());var e=this.img1,n=this.img2;this.switchInd%2!=0&&(e=this.img2,n=this.img1),e.setOnLoadListener((function t(){e.setOpacity(1),e.animate(),n.setOpacity(0),e.removeOnLoadListener(t)})),e.setImageUrl(t)}},{key:"triggerClick",value:function(){this.currentSection.linkUrl&&window.open(this.currentSection.linkUrl,"_blank")}},{key:"end",value:function(){this.audio.pause(),window.clearInterval(this.intervalId),this.intervalId=-1,d(u.DEBUG,"RS-ATV End."),this.endCallback&&this.endCallback()}}])&&Ut(e.prototype,n),i&&Ut(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==_t(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==_t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===_t(r)?r:String(r)),i)}var o,r}function zt(t,e){return zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zt(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var o=Gt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zt(t,e)}(r,t);var e,n,i,o=Ft(r);function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,(n=[{key:"initAd",value:function(t,e,n,i,o,r){var a=this;this.width=t,this.height=e,this.config=(null==o?void 0:o.AdParameters)||o,this.contentData=this.config.contentData,null!=r&&r.slot&&(this.adContainer=r.slot),this.renderer=new Bt(this.contentData,this.adContainer,t,e,this.config.bgColor,(function(){a.triggerEvent(v.AdLoaded)})),this.renderer.endCallback=function(){a.triggerEvent(v.AdStopped)}}},{key:"startAd",value:function(){this.video&&(this.video.style.visibility="hidden"),this.adContainer.style.display="",this.startTime=(new Date).getTime(),this.renderer.start(),this.triggerEvent(v.AdStarted),this.adContainer.addEventListener("click",this.onAdClickThru.bind(this)),this.adContainer.addEventListener("touch",this.onAdClickThru.bind(this))}},{key:"stopAd",value:function(){throw new Error("stopAd not implemented")}},{key:"skipAd",value:function(){throw new Error("skipAd not implemented")}},{key:"pauseAd",value:function(){throw new Error("pauseAd not implemented")}},{key:"resumeAd",value:function(){throw new Error("resumeAd not implemented")}},{key:"getRemainingTime",value:function(){return this.duration-this.elapsed}},{key:"mute",value:function(t){}},{key:"expandAd",value:function(){}},{key:"collapseAd",value:function(){}},{key:"getAdVolume",value:function(){return 1}},{key:"getAdDuration",value:function(){return 15*this.contentData.sections.length}},{key:"getAdRemainingTime",value:function(){return this.getAdDuration()-this.getAdElapsedTime()}},{key:"getAdElapsedTime",value:function(){return(new Date).getTime()-this.startTime}},{key:"getAdProgress",value:function(){return Math.round(100*(this.getAdElapsedTime()/this.getAdDuration()+Number.EPSILON))}},{key:"resizeAd",value:function(t,e){this.adContainer.style.width="".concat(t,"px"),this.adContainer.style.height="".concat(e,"px")}},{key:"onAdClickThru",value:function(){this.renderer.triggerClick()}}])&&Ht(e.prototype,n),i&&Ht(e,i),Object.defineProperty(e,"prototype",{writable:!1}),r}(A);function qt(t,e){e(t),Array.from(t.children).forEach((function(t){qt(t,e)}))}function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function $t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==Qt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Qt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Qt(r)?r:String(r)),i)}var o,r}var Zt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.mainColor=n,this.firstSection=null,this.lastSection=null,this.colors={}}var e,n,i;return e=t,(n=[{key:"addSection",value:function(t){t.title||(t.title=this.title),this.firstSection?(this.lastSection.next=t,this.lastSection=t):(this.firstSection=t,this.lastSection=t)}},{key:"addColor",value:function(t){var e=this;if(t&&"rgb(0, 0, 0)"!==t){this.colors[t]?this.colors[t]+=1:this.colors[t]=1;var n="",i=0;Object.keys(this.colors).forEach((function(t){var o=e.colors[t];o>i&&(i=o,n=t)})),n&&(this.mainColor=n)}}}])&&$t(e.prototype,n),i&&$t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==Xt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Xt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Xt(r)?r:String(r)),i)}var o,r}var Jt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.images=[],this.textContent="",this.price=null,this.linkUrl=null}var e,n,i;return e=t,n=[{key:"getImgUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t>this.images.length-1?null:this.images[t]}},{key:"getText",value:function(){var t=this.title;return this.price&&(t="".concat(this.title," - ").concat(this.price)),t}}],n&&Yt(e.prototype,n),i&&Yt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,r=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Kt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Kt(r)?r:String(r)),i)}var o,r}var ee=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contentElement=document.querySelector(e.contentSelector);var i=null===(n=this.contentElement)||void 0===n?void 0:n.querySelectorAll("H1")[0];this.content=new Zt(null==i?void 0:i.textContent.trim()),this.error="Not initialised."}var e,n,i;return e=t,n=[{key:"getContent",value:function(){return this.fetchGrid()||this.fetchPage()}},{key:"fetchGrid",value:function(){var t=this,e=ot(this.contentElement).itemList;return null!=e&&e.children.length&&(d(u.DEBUG,"Found Grid to get content from"),Array.from(e.children).forEach((function(e,n){var i,o,r,a=new ct(e,null,!0);a.fetchElements(),t.content.addColor(null===(i=a.title)||void 0===i?void 0:i.computedColor),t.content.addColor(null===(o=a.desc)||void 0===o?void 0:o.computedColor),t.content.addColor(null===(r=a.price)||void 0===r?void 0:r.computedColor);var l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t=(t=(t=t.trim()).split(" ").filter((function(t,e,n){return e===n.indexOf(t)})).join(" ")).replaceAll(/\.\.\./g,"")).length>50&&(t=t.replaceAll(/(Livré avec.*)|(avec.*)|(, .*)|(style.*)|(modèle.*)|(\(.*\))|(\..*)/g,"")),t}(a.getDescriptiveText()),s=new Jt(l),c=a.getImgSrc();if(/^(http(s):\/\/.)[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}([-a-zA-Z0-9@:%,_+.~#?&/=]*)$/.test(c)){s.images.push(c),s.linkUrl=a.link.href;var u=a.price;if(u){var d=u.originalValue||u.innerText;s.price=d.trim(),t.content.addColor(s.price.computedColor)}t.content.addSection(s)}}))),this.content.firstSection?(this.error="",this.content):null}},{key:"fetchPage",value:function(){var t,e,n,i=(t=this.contentElement||window.document.body,e=null,n=0,Array.from(t.querySelectorAll("div, section, article, p")).forEach((function(t){var i=Array.from(t.children).filter((function(t){var e=t.textContent;return"P"===t.nodeName&&e.length>70}));i.length>n&&(n=i.length,e=t)})),e);return null===i?this.error="Cannot find article content.":(d(u.DEBUG,"Found Text element to get content from"),this.error="",this.parse(i,this.contentElement)),this.content}},{key:"parse",value:function(t){var e,n=this,i=null;i=new Jt(null===(e=this.mainTitleElement)||void 0===e?void 0:e.textContent),qt(t,(function(t){if(["H1","H2","H3","H4","H5"].includes(t.nodeName)){var e=window.getComputedStyle(t);n.content.addSection(i),i=new Jt(t.textContent),e.color&&n.content.addColor(e.color)}else["P"].includes(t.nodeName)?i.textContent+=t.textContent.trim():["IMG"].includes(t.nodeName)&&i.images.push(t.getAttribute("src"))})),this.content.addSection(i)}}],n&&te(e.prototype,n),i&&te(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(n),!0).forEach((function(e){re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function re(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ne(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ne(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ae(t,e){var n=new ee(t),i=n.getContent();if(n.error)d(u.DEBUG,"ATV parser error: ",n.error);else{t.contentData=i;var o=document.createElement("video");o.setAttribute("playsinline","true"),o.setAttribute("webkit-playsinline","true");var r=document.createElement("div");r.id="RS-atv-ad-".concat(Math.round(1e4*Math.random()));var a=new Wt;t=oe(oe({},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.AUTO,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.VIDEO;return t===f.INGRID?e===h.NATIVE?y:g:p}(t.format,t.mediatype)),t),(a=new(kt(t.format,t.mediatype))(a,o,r,t)).initAd(t.width,t.height,"normal",null,t,{slot:r,videoSlot:o,videoSlotCanAutoPlay:!0})}}window.RSATVConfig&&ae(window.RSATVConfig),RSATV=e})();