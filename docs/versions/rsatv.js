var RSATV;(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){var e=t.getBoundingClientRect(),n=getComputedStyle(t),i=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10),r=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10);return{width:Math.floor(e.width)-r,height:Math.floor(e.height)-i}}t.r(e),t.d(e,{showVideo:()=>oe,version:()=>s});var i=-1;function r(t){var e=function e(){window.clearTimeout(i),i=window.setTimeout((function(){t(),window.removeEventListener("scroll",e)}),500)};i=window.setTimeout((function(){t(),window.removeEventListener("scroll",e)}),1e3),window.addEventListener("scroll",e)}function o(t){var e=null,n=window.innerHeight;return null==t||t.forEach((function(t){var i=Math.abs(t.getBoundingClientRect().bottom-window.innerHeight/2);i<n&&(n=i,e=t)})),e}function a(t,e,n){try{e(t),!n(t)&&t.parentElement&&a(t.parentElement,e,n)}catch(t){}}function l(t,e,n){try{e(t),t!==n&&t.parentElement&&1===t.parentElement.childElementCount&&l(t.parentElement,e,n)}catch(t){}}var s="1.1a",c="prod";switch(c){case"preprod":"https://static-preprod.retail-spot.io/";break;case"prod":"https://static.retail-spot.io/";break;default:"http://localhost:3000/dist/"}var u={WARN:"warn",ERROR:"error",DEFAULT:"log"};function d(){for(var t,e=u.DEFAULT,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if([u.WARN,u.ERROR,u.DEFAULT].includes(i[0])&&(e=i.shift()),e!==u.DEFAULT||"prod"!==c||"true"===(o="rsp_debug",a=null,l=[],window.location.search.substring(1).split("&").forEach((function(t){(l=t.split("="))[0].toLowerCase()===o.toLowerCase()&&(a=decodeURIComponent(l[1]))})),a)){var o,a,l;(t=console)[e].apply(t,["%cRetailSpot","padding:2px 6px;border-radius:8px;background-color:#1a2691;color:white",i.shift()].concat(i))}}d("env : ".concat(c)),d("Script version: ".concat(s));var h={VIDEO:"video",NATIVE:"native",BANNER:"banner"},f={AUTO:"auto",AUTO_NO_SLIDER:"autoNoSlider",SLIDER:"slider",INTEXT:"intext",INGRID:"ingrid"},p={AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog",AdProgress:"AdProgress"};function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===y(o)?o:String(o)),i)}var r,o}var m=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.video=e,this.adContainer=n,this.elapsed=0,this.duration=-1,this.hasCompletedOnce=!1,this.listeners={},this.sentEvents=[]}var e,n,i;return e=t,n=[{key:"handshakeVersion",value:function(){return"2.0"}},{key:"initAd",value:function(){throw new Error("initAd not implemented")}},{key:"startAd",value:function(){this.video.style.display="",this.adContainer.style.display=""}},{key:"stopAd",value:function(){throw new Error("stopAd not implemented")}},{key:"skipAd",value:function(){throw new Error("skipAd not implemented")}},{key:"pauseAd",value:function(){throw new Error("pauseAd not implemented")}},{key:"resumeAd",value:function(){throw new Error("resumeAd not implemented")}},{key:"getRemainingTime",value:function(){return this.duration-this.elapsed}},{key:"mute",value:function(t){throw new Error("mute not implemented")}},{key:"expandAd",value:function(){throw new Error("expandAd not implemented")}},{key:"collapseAd",value:function(){throw new Error("collapseAd not implemented")}},{key:"getAdVolume",value:function(){throw new Error("getAdVolume not implemented")}},{key:"getAdDuration",value:function(){throw new Error("getAdDuration not implemented")}},{key:"getAdRemainingTime",value:function(){throw new Error("getAdRemainingTime not implemented")}},{key:"getAdElapsedTime",value:function(){return this.getAdDuration()-this.getAdRemainingTime()}},{key:"getAdProgress",value:function(){return Math.round(100*(this.getAdElapsedTime()/this.getAdDuration()+Number.EPSILON))}},{key:"resizeAd",value:function(){}},{key:"subscribe",value:function(t,e){if(this.listeners[e]||(this.listeners[e]=[]),"function"!=typeof t)throw new Error("Callback is not a function for event: ".concat(e));this.listeners[e].push(t)}},{key:"unsubscribe",value:function(t,e){if(this.listeners[e]){var n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}}},{key:"triggerEvent",value:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.shift();null===(t=this.listeners[r])||void 0===t||t.forEach((function(t){t.apply(void 0,n)})),this.sentEvents.push(r)}},{key:"triggerOnce",value:function(){var t=arguments.length<=0?void 0:arguments[0];this.sentEvents.includes(t)||this.triggerEvent.apply(this,arguments)}}],n&&g(e.prototype,n),i&&g(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===v(o)?o:String(o)),i)}var r,o}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=E(t);if(e){var r=E(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==S(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===S(o)?o:String(o)),i)}var r,o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},x.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=P(t);if(e){var r=P(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(o,t);var e,n,i,r=O(o);function o(t,e,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=r.call(this,t,e,n)).id="BaseFormat",a.config=i,a.video=e,a.adContainer=n,a.playerDiv=document.createElement("div"),a.playerDiv.setAttribute("id","rsplayer"),a.playerDiv.style.position="relative",a.playerDiv.style.margin="auto",a.video.volume=0,a.video.style.width="100%",a.video.style.height="100%",a.video.style.position="absolute",a.video.style.top="0px",a.video.style.left="0px",a.video.style.backgroundColor=i.bgColor||"transparent",a.adContainer.style.width="100%",a.adContainer.style.height="100%",a.adContainer.style.position="absolute",a.adContainer.style.top="0px",a.adContainer.style.left="0px",a.playerDiv.appendChild(a.video),a.playerDiv.appendChild(a.adContainer),window.setTimeout((function(){a.insertPlayer(i.CSSSelector,i.target)}),0),a}return e=o,(n=[{key:"insertPlayer",value:function(t,e){(e=e||window.document.querySelector(t))&&e.appendChild(this.playerDiv)}},{key:"initAd",value:function(t,e,n,i,r,a){t&&(this.playerDiv.style.width="".concat(t,"px")),e&&(this.playerDiv.style.height="".concat(e,"px")),x(P(o.prototype),"initAd",this).call(this,t,e,n,i,r,a)}},{key:"resizeAd",value:function(t,e,n){this.playerDiv.style.width="".concat(t,"px"),this.playerDiv.style.height="".concat(e,"px"),x(P(o.prototype),"resizeAd",this).call(this,t,e,n)}},{key:"onAdLoaded",value:function(){x(P(o.prototype),"onAdLoaded",this).call(this),this.startAd()}}])&&k(e.prototype,n),i&&k(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(o,t);var e,n,i,r=w(o);function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=null,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i[0]&&o.checkVPAIDInterface(i[0])&&(e=i.shift()),(t=r.call.apply(r,[this].concat(i))).id="VPAIDWrapper",e&&t.setVPAIDCreative(e),t}return e=o,n=[{key:"setVPAIDCreative",value:function(t){this.creative=t,o.checkVPAIDInterface(t)?this.setCallbacksForCreative():d(u.ERROR,"VPAIDCreative doesn't conform to the VPAID spec")}},{key:"setCallbacksForCreative",value:function(){var t=this,e={AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdLinearChange:this.onAdLinearChange,AdSizeChange:this.onAdSizeChange,AdExpandedChange:this.onAdExpandedChange,AdSkippableStateChange:this.onAdSkippableStateChange,AdDurationChange:this.onAdDurationChange,AdRemainingTimeChange:this.onAdRemainingTimeChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:this.onAdInteraction,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:this.onAdUserAcceptInvitation,AdUserMinimize:this.onAdUserMinimize,AdUserClose:this.onAdUserClose,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog,AdProgress:this.onAdProgress};Object.keys(e).forEach((function(n){t.creative.subscribe(e[n].bind(t),n,t)}))}},{key:"initAd",value:function(t,e,n,i,r,o){this.playerWidth=t,this.playerHeight=e,this.creative.initAd(t,e,n,i,r,o)}},{key:"getInnerCreative",value:function(){var t;return"function"==typeof(null===(t=this.creative)||void 0===t?void 0:t.getInnerCreative)?this.creative.getInnerCreative():this}},{key:"onAdPaused",value:function(){this.log("onAdPaused"),this.triggerEvent(p.AdPaused)}},{key:"onAdPlaying",value:function(){this.log("onAdPlaying"),this.triggerEvent(p.AdPlaying)}},{key:"onAdError",value:function(t){d("onAdError: ".concat(t)),this.triggerEvent(p.AdError,t)}},{key:"onAdLog",value:function(t){this.log("onAdLog: ".concat(t)),this.triggerEvent(p.AdLog,t)}},{key:"onAdProgress",value:function(t){this.log("onAdProgress: ".concat(t)),this.triggerEvent(p.AdProgress,t)}},{key:"onAdUserAcceptInvitation",value:function(){this.log("onAdUserAcceptInvitation"),this.triggerEvent(p.AdUserAcceptInvitation)}},{key:"onAdUserMinimize",value:function(){this.log("onAdUserMinimize"),this.triggerEvent(p.AdUserMinimize)}},{key:"onAdUserClose",value:function(){this.log("onAdUserClose"),this.triggerEvent(p.AdUserClose)}},{key:"onAdSkippableStateChange",value:function(){this.log("Ad Skippable State Changed to: ".concat(this.creative.getAdSkippableState())),this.triggerEvent(p.AdSkippableStateChange)}},{key:"onAdExpandedChange",value:function(){this.log("Ad Expanded Changed to: ".concat(this.creative.getAdExpanded())),this.triggerEvent(p.AdExpandedChange)}},{key:"getAdExpanded",value:function(){return this.log("getAdExpanded"),this.creative.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return this.log("getAdSkippableState"),this.creative.getAdSkippableState()}},{key:"onAdSizeChange",value:function(){this.log("Ad size changed to: w=".concat(this.creative.getAdWidth()," h =").concat(this.creative.getAdHeight()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[p.AdSizeChange].concat(e))}},{key:"onAdDurationChange",value:function(){this.log("Ad Duration Changed to: ".concat(this.creative.getAdDuration())),this.duration=this.getAdDuration();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[p.AdDurationChange].concat(e))}},{key:"onAdRemainingTimeChange",value:function(){d("Ad Remaining Time Changed to: ".concat(this.creative.getAdRemainingTime()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[p.AdRemainingTimeChange].concat(e))}},{key:"getAdRemainingTime",value:function(){return this.creative.getAdRemainingTime()}},{key:"getAdDuration",value:function(){return this.creative.getAdDuration()}},{key:"onAdImpression",value:function(){this.log("Ad Impression"),this.triggerEvent(p.AdImpression)}},{key:"onAdClickThru",value:function(t,e,n){this.log("Clickthrough portion of the ad was clicked"),this.triggerEvent(p.AdClickThru)}},{key:"onAdInteraction",value:function(t){this.log("A non-clickthrough event has occured"),this.triggerEvent(p.AdInteraction)}},{key:"onAdVideoStart",value:function(){this.log("Video 0% completed"),this.triggerEvent(p.AdVideoStart)}},{key:"onAdVideoFirstQuartile",value:function(){this.log("Video 25% completed"),this.triggerEvent(p.AdVideoFirstQuartile)}},{key:"onAdVideoMidpoint",value:function(){this.log("Video 50% completed"),this.triggerEvent(p.AdVideoMidpoint)}},{key:"onAdVideoThirdQuartile",value:function(){this.log("Video 75% completed"),this.triggerEvent(p.AdVideoThirdQuartile)}},{key:"onAdVideoComplete",value:function(){this.log("Video 100% completed"),this.triggerEvent(p.AdVideoComplete)}},{key:"onAdLinearChange",value:function(){this.log("Ad linear has changed: ".concat(this.creative.getAdLinear()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[p.AdLinearChange].concat(e))}},{key:"getAdLinear",value:function(){return this.log("getAdLinear"),this.creative.getAdLinear()}},{key:"startAd",value:function(){this.log("startAd"),this.creative.startAd()}},{key:"onAdLoaded",value:function(){this.log("Ad has been loaded"),this.triggerEvent(p.AdLoaded)}},{key:"onAdStarted",value:function(){this.log("Ad has started"),this.triggerEvent(p.AdStarted)}},{key:"stopAd",value:function(){this.creative.stopAd()}},{key:"onAdStopped",value:function(){this.log("Ad has stopped"),this.triggerEvent(p.AdStopped)}},{key:"onAdSkipped",value:function(){this.log("Ad was skipped"),this.triggerEvent(p.AdSkipped)}},{key:"setAdVolume",value:function(t){this.creative.setAdVolume(t)}},{key:"getAdVolume",value:function(){return this.creative.getAdVolume()}},{key:"onAdVolumeChange",value:function(){this.log("Ad Volume has changed to - ".concat(this.creative.getAdVolume()));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.triggerEvent.apply(this,[p.AdVolumeChange].concat(e))}},{key:"resizeAd",value:function(t,e,n){this.creative.resizeAd(t,e,n)}},{key:"pauseAd",value:function(){this.creative.pauseAd()}},{key:"resumeAd",value:function(){this.creative.resumeAd()}},{key:"expandAd",value:function(){this.creative.expandAd()}},{key:"collapseAd",value:function(){this.creative.collapseAd()}},{key:"log",value:function(t){d("[".concat(this.id.substring(0,11),"] \t- ").concat(t))}}],i=[{key:"checkVPAIDInterface",value:function(t){return!!(t.handshakeVersion&&"function"==typeof t.handshakeVersion&&t.initAd&&"function"==typeof t.initAd&&t.startAd&&"function"==typeof t.startAd&&t.stopAd&&"function"==typeof t.stopAd&&t.skipAd&&"function"==typeof t.skipAd&&t.resizeAd&&"function"==typeof t.resizeAd&&t.pauseAd&&"function"==typeof t.pauseAd&&t.resumeAd&&"function"==typeof t.resumeAd&&t.expandAd&&"function"==typeof t.expandAd&&t.collapseAd&&"function"==typeof t.collapseAd&&t.subscribe&&"function"==typeof t.subscribe&&t.unsubscribe&&"function"==typeof t.unsubscribe)}}],n&&b(e.prototype,n),i&&b(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(m));function j(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function D(){function t(t,e){var n=[],i=-1;return t.forEach((function(t){var r,o,a,l,s=t.getBoundingClientRect();if(s&&!["A","LI","NOSCRIPT","IMG"].includes(t.nodeName)){var c=s.width,u=s.x,d=s.x+s.width;c>e&&c<900&&(-1===i&&(i=c),c===i&&u>-20&&d<=window.innerWidth+20&&(r=t,o=r.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop,{top:o.top+l,left:o.left+a,right:o.left+a+o.width,bottom:o.top+l+o.height}).bottom>window.innerHeight/2&&n.push(t))}})),n}function e(n,i){var r,o=i,a=parseInt(window.innerWidth,10)/2,l=Array.from(n.children),s=t(l,a);s.length>0&&(r=o).push.apply(r,j(s));return l.forEach((function(t){var n=t.getBoundingClientRect().width;t.children.length>0&&n>a&&(o=e(t,o))})),o}return new Promise((function(t,n){var i=e(window.document.body,[]);0===i.length&&n(new Error("AutoPositioning: Target Not found.")),r((function(){t(o(i))}))}))}function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==R(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===R(o)?o:String(o)),i)}var r,o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},V.apply(this,arguments)}function U(t,e){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},U(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=N(t);if(e){var r=N(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(o,t);var e,n,i,r=M(o);function o(t,e,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=r.call(this,t,e,n,i)).id="IntextFormat",a.speed=.7,a.animatedDiv=document.createElement("div"),a.animatedDiv.style.overflow="hidden",a.animatedDiv.style.height="0px",a.animatedDiv.style.width="100%",a.animatedDiv.style.transition="height ease ".concat(a.speed,"s"),a.waitToStart=!1,a.adLoaded=!1,a}return e=o,(n=[{key:"insertPlayer",value:function(t,e){var n=this,i=function(t){n.playerDiv.style.margin="auto",n.animatedDiv.appendChild(n.playerDiv),t.appendChild(n.animatedDiv),n.startAd()};(e=e||window.document.querySelector(t))?i(e):D().then((function(t){d(u.DEBUG,"Autopositioning : ",t),i(t)})).catch((function(t){d(u.DEBUG,"Autopositioning : ",t.message)}))}},{key:"initAd",value:function(t,e,n,i,r,a){V(N(o.prototype),"initAd",this).call(this,t,e,n,i,r,a)}},{key:"onAdLoaded",value:function(){this.adLoaded=!0,V(N(o.prototype),"onAdLoaded",this).call(this)}},{key:"startAd",value:function(){this.animatedDiv.parentElement&&this.adLoaded?V(N(o.prototype),"startAd",this).call(this):this.waitToStart=!0}},{key:"onAdStarted",value:function(){V(N(o.prototype),"onAdStarted",this).call(this),this.open()}},{key:"open",value:function(){this.animatedDiv.style.height=this.playerDiv.style.height}},{key:"close",value:function(){var t=this;this.animatedDiv.style.height="0px",window.setTimeout((function(){t.animatedDiv.parentElement&&t.animatedDiv.parentElement.removeChild(t.animatedDiv)}),1e3*this.speed)}},{key:"onAdStopped",value:function(){V(N(o.prototype),"onAdStopped",this).call(this),this.close()}},{key:"onAdVideoComplete",value:function(){V(N(o.prototype),"onAdVideoComplete",this).call(this),this.close()}}])&&L(e.prototype,n),i&&L(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t,e,n){return(e=W(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,W(i.key),i)}}function W(t){var e=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===B(e)?e:String(e)}function Q(){return Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},Q.apply(this,arguments)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=X(t);if(e){var r=X(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(o,t);var e,n,i,r=$(o);function o(t,e,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(a=r.call(this,t,e,n,i)).id="SliderFormat",a.vmargin="number"==typeof i.vmargin?i.vmargin:30,a.hmargin="number"==typeof i.hmargin?i.hmargin:30,a.speed=.7,a.playerDiv.style.position="fixed",a.playerDiv.style.zIndex=1e6,a.playerDiv.style.transition="top ease ".concat(a.speed,"s, left ease ").concat(a.speed,"s, right ease ").concat(a.speed,"s, bottom ease ").concat(a.speed,"s"),a.playerDiv.style.boxShadow="rgba(0, 0, 0, 0.7) 0px 0px 20px",a.setPositions(i),a.applyPosition(a.startPosition),a}return e=o,(n=[{key:"insertPlayer",value:function(t){window.document.body.appendChild(this.playerDiv)}},{key:"setPositions",value:function(t){var e,n,i="right";this.vmargin<this.hmargin&&(i="bottom");var r=window.innerHeight-t.height-this.vmargin;(null===(e=t.align)||void 0===e?void 0:e.indexOf("top"))>=0&&(r=this.vmargin,this.vmargin<this.hmargin&&(i="top"));var o,a=window.innerWidth-t.width-this.hmargin;switch((null===(n=t.align)||void 0===n?void 0:n.indexOf("left"))>=0&&(a=this.hmargin,this.vmargin>=this.hmargin&&(i="left")),this.targetPosition={top:"".concat(r,"px"),left:"".concat(a,"px")},t.anim||i){case"top":o={top:"".concat(-t.height,"px")};break;case"left":o={left:"".concat(-t.width,"px")};break;case"bottom":o={top:"".concat(parseInt(t.height,10)+parseInt(window.innerHeight,10),"px")};break;case"right":o={left:"".concat(parseInt(t.width,10)+parseInt(window.innerWidth,10),"px")}}this.startPosition=z(z({},this.targetPosition),o)}},{key:"applyPosition",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.playerDiv.style[n]=t[n]}))}},{key:"initAd",value:function(t,e,n,i,r,a){Q(X(o.prototype),"initAd",this).call(this,t,e,n,i,r,a)}},{key:"onAdLoaded",value:function(){Q(X(o.prototype),"onAdLoaded",this).call(this),this.applyPosition(this.targetPosition)}},{key:"close",value:function(){var t=this;this.applyPosition(this.startPosition),window.setTimeout((function(){window.document.body.removeChild(t.playerDiv)}),1e3*this.speed)}},{key:"onAdStopped",value:function(){Q(X(o.prototype),"onAdStopped",this).call(this),this.close()}},{key:"onAdVideoComplete",value:function(){Q(X(o.prototype),"onAdVideoComplete",this).call(this),this.close()}}])&&G(e.prototype,n),i&&G(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(T);function Y(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var K=new RegExp(["€","$","£","%"].map((function(t){return"\\".concat(t)})).join("|")),tt=null;function et(t){return K.test(t)}function nt(t,e,n){if(!t||"A"!==t.nodeName&&"DIV"!==t.nodeName&&"LI"!==t.nodeName&&"ARTICLE"!==t.nodeName)return!1;var i=0,r=0,o=0;try{var a=getComputedStyle(t);if(i=Math.floor(parseInt(a.width,10)),r=Math.floor(parseInt(a.height,10)),o=Math.floor(t.offsetTop),e&&Math.abs(i-e)>10&&n&&Math.abs(r-n)>10)return!1}catch(t){return!1}return{valid:et(t.innerText),width:i,height:r,top:o}}function it(t){if(!tt||t){var e=t?[t]:[].concat(Y(document.getElementsByTagName("DIV")),Y(document.getElementsByTagName("UL")),Y(document.getElementsByTagName("SECTION"))),n=null,i=null;e.length>0&&(i=e.find((function(t){if(t.childElementCount<=4||"absolute"===t.style.position||"fixed"===t.style.position||"none"===t.style.display||null===t.offsetParent)return!1;for(var e=0,i=[[]],r=i[0],o=0,a=0,l=t.firstElementChild,s=l.offsetTop;l&&e<4&&e>=0&&l;){var c=nt(l,o,a);null!=c&&c.valid?(o=c.width,a=c.height,s!==c.top&&(r=[],i.push(r),s=c.top),r.push(c),l=l.nextElementSibling,e+=1):e=-1}return n=i,4===e})));var r=i;d(u.DEBUG,"Retail tools, Found item grid: ",r),d(u.DEBUG,"Grid: ",n),tt={itemList:r,gridProfile:n}}return tt}function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(t){return function(t){if(Array.isArray(t))return at(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function lt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==rt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===rt(o)?o:String(o)),i)}var r,o}var st=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.readOnly=n,this.title=null,this.desc=null,this.ctatext=null,this.sponsoredBy=null,this.price=null,this.img=null,this.brandImg=null,this.sponsoredLabel=null,this.link=null,this.buttonsEls=[],this.textEls=[],this.imgEls=[],this.pricesEls=[],this.descEls=[],this.garbageEls=[],this.aEls=[],this.applyChange((function(){e.onclick=function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation()}}))}var e,i,r;return e=t,i=[{key:"isImg",value:function(t){return 1===t.children.length&&"svg"===t.children[0].nodeName||"IMG"===t.nodeName||"PICTURE"===t.nodeName||t.style.background.includes("url(")}},{key:"fetchLink",value:function(t){if(this.isLink(t)){this.aEls.push(t);var e=window.getComputedStyle(t);t.area=parseInt(e.width,10)*parseInt(e.height,10)}}},{key:"isLink",value:function(t){return"A"===t.nodeName}},{key:"isText",value:function(t){var e=!1,n=0;if(Array.from(t.childNodes).forEach((function(t){var e;3===t.nodeType&&(n+=(null===(e=t.textContent)||void 0===e?void 0:e.trim().length)||0)})),n>1){var i,r=!0;Array.from(t.children).forEach((function(t){["SUP","EM","SPAN","A","STRONG"].includes(t.nodeName)&&"block"!==window.getComputedStyle(t).display||(r=!1)})),r&&(t.originalValue=t.innerText,this.applyChange((function(){t.innerHTML=t.innerText}))),e=!0,"SUP"===(null===(i=t.nextSibling)||void 0===i?void 0:i.nodeName)&&(this.applyChange((function(){t.innerHTML+=t.nextSibling.innerText})),t.originalValue=t.innerHTML+t.nextSibling.innerText)}else 1===n&&this.garbageEls.push(t);return e}},{key:"isDesc",value:function(t){return t.height>=2*t.lineHeight}},{key:"isButton",value:function(t){for(var e=!1,n=t;!e&&n.children.length<=1;){var i=window.getComputedStyle(n);e=!i.background.includes("rgba(0, 0, 0, 0)")&&!i.background.includes("url("),n=n.parentElement}return e}},{key:"isPrice",value:function(t){var e=(t.originalValue||t.innerText).replace("dès","").replace("à partir de","");return e.length<=10&&!Number.isNaN(parseInt(e,10))&&et(e)}},{key:"isOrContainElements",value:function(t){return this.title&&(this.title===t||t.contains(this.title))||this.desc&&(this.desc===t||t.contains(this.desc))||this.ctatext&&(this.ctatext===t||t.contains(this.ctatext))||this.sponsoredBy&&(this.sponsoredBy===t||t.contains(this.sponsoredBy))||this.price&&(this.price===t||t.contains(this.price))||this.img&&(this.img===t||t.contains(this.img))||this.brandImg&&(this.brandImg===t||t.contains(this.brandImg))||this.sponsoredLabel&&(this.sponsoredLabel===t||t.contains(this.sponsoredLabel))}},{key:"removeLineThrough",value:function(t){var e=this;a(t,(function(t){0===window.getComputedStyle(t).textDecoration.indexOf("line-through")&&e.applyChange((function(){t.style.textDecoration="none"}))}),(function(t){return t===e.container}))}},{key:"applyChange",value:function(t){this.readOnly||t()}},{key:"fetchElements",value:function(){var t=this;this.fetchLink(this.container);var e=this.container.querySelectorAll("*"),n=Array.from(e);n.forEach((function(e){if(e.childNodes.length>1&&e.childNodes.forEach((function(e){"svg"===e.nodeName&&t.applyChange((function(){return e.style.visibility="hidden"}))})),"SUP"===e.nodeName&&t.applyChange((function(){e.style.display="none"})),e.offsetParent)if(t.fetchLink(e),t.isText(e)){var n,i=window.getComputedStyle(e);e.fontSize=parseInt(i.fontSize,10),e.lineHeight=parseInt(i.lineHeight,10),e.height=parseInt(i.height,10),e.computedColor=i.color,e.fontWeight=i.fontWeight,t.removeLineThrough(e),e.rotate=null===(n=i.transform)||void 0===n?void 0:n.includes("matrix"),e.isSquare=Math.abs(parseInt(i.width,10)-parseInt(i.height,10))<3,e.rotate||e.isSquare?t.garbageEls.push(e):t.isPrice(e)?t.pricesEls.push(e):t.isDesc(e)?t.descEls.push(e):t.isButton(e)?t.buttonsEls.push(e):t.textEls.push(e)}else if(t.isImg(e)){var r=window.getComputedStyle(e);e.compWidth=r.width,e.compHeight=r.height,e.compBackground=r.background,e.compMargin=r.margin,e.compMarginLeft=r.marginLeft,e.compMarginRight=r.marginRight,e.area=parseInt(r.width,10)*parseInt(r.height,10),t.imgEls.push(e)}else e.childNodes.forEach((function(n){3===n.nodeType&&(e.origHeight||(e.origHeight=window.getComputedStyle(e).height),t.applyChange((function(){n.nodeValue=""})))})),e.origHeight&&t.applyChange((function(){e.style.minHeight=e.origHeight}))})),this.aEls.sort((function(t,e){return e.area-t.area})),this.link=this.aEls.shift(),this.imgEls.sort((function(t,e){return e.area-t.area})),this.img=this.imgEls.shift(),this.brandImg=this.imgEls.shift();var i=function(t,e){if(!t.rotate&&e.rotate)return-1;if(t.rotate&&!e.rotate)return 1;var n=0;return 0==(n=e.fontSize-t.fontSize)&&(n=e.fontWeight-t.fontWeight),0===n&&(n=t.offsetTop-e.offsetTop),n};this.textEls.sort(i),this.title=this.textEls.shift(),this.sponsoredBy=this.textEls.shift(),this.descEls.sort((function(t,e){return e.innerText.trim().length-t.innerText.trim().length})),this.desc=this.descEls.shift(),this.desc||(this.textEls.sort((function(t,e){return e.innerText.trim().length-t.innerText.trim().length})),this.desc=this.textEls.shift()),this.buttonsEls.sort(i),this.ctatext=this.buttonsEls.shift(),this.pricesEls.sort((function(t,e){return t.innerText.includes("%")&&!e.innerText.includes("%")?1:!t.innerText.includes("%")&&e.innerText.includes("%")?-1:i(t,e)})),this.price=this.pricesEls.shift(),this.garbageEls=this.garbageEls.concat(n.filter((function(e){return!t.isOrContainElements(e)}))),this.applyChange((function(){t.hideUnused([].concat(ot(t.imgEls),ot(t.textEls),ot(t.pricesEls),ot(t.buttonsEls),ot(t.garbageEls)))})),d(u.DEBUG,"title : ",this.title),d(u.DEBUG,"description : ",this.desc),d(u.DEBUG,"ctaText : ",this.ctatext),d(u.DEBUG,"brand : ",this.sponsoredBy),d(u.DEBUG,"price : ",this.price),d(u.DEBUG,"img : ",this.img),d(u.DEBUG,"brandImg : ",this.brandImg),d(u.DEBUG,"Link : ",this.link)}},{key:"hideUnused",value:function(t){var e=this;t.forEach((function(t){l(t,(function(t){t.style.visibility="hidden"}),e.container)}))}},{key:"scaleWidth",value:function(t){var e=this;t>1&&this.img&&a(this.img,(function(e){var i=n(e);e.style.minWidth="".concat(Math.floor(i.width*t),"px")}),(function(t){return t===e.container}))}},{key:"fillText",value:function(t,e){t&&(e?t.innerText=e:l(t,(function(t){t.style.visibility="hidden"}),this.container))}},{key:"fillImg",value:function(t,e){var n=!1;t&&(e&&(t.style.width=t.compWidth,t.style.height=t.compHeight,"IMG"===t.nodeName?(t.style.objectFit="cover",t.src=e,n=!0):t.compBackground.includes("url(")&&(t.style.background=t.compBackground.replace(/(.*url\()([^)"']*)(\).*)/,"$1".concat(e,"$3")),n=!0)),n||l(t,(function(t){t.style.visibility="hidden"}),this.container))}},{key:"applyValues",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fillText(this.title,n.title),this.fillText(this.desc,n.desc),this.fillText(this.ctatext,n.ctatext),this.fillText(this.sponsoredBy,n.sponsoredBy||n.domain),this.fillText(this.price,n.price),this.fillText(this.sponsoredLabel,"Sponsorisé"),this.fillImg(this.img,null===(t=n.image)||void 0===t?void 0:t.url),this.fillImg(this.brandImg,null===(e=n.brandLogo)||void 0===e?void 0:e.url)}},{key:"replaceImg",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==(e=this.img)&&void 0!==e&&e.parentElement){var i=document.createElement("DIV"),r=this.img.getBoundingClientRect();if(this.img.parentElement.replaceChild(i,this.img),i.style.width="".concat(r.width,"px"),i.style.height="".concat(r.height,"px"),i.style.position=this.img.style.position,i.style.left=this.img.style.left,i.style.top=this.img.style.top,i.style.right=this.img.style.right,i.style.bottom=this.img.style.bottom,t.style.width="".concat(r.width,"px"),t.style.height="".concat(r.height,"px"),n){var o=r.width+parseInt(this.img.compMarginLeft,10)+parseInt(this.img.compMarginRight,10);i.style.width="".concat(o,"px"),t.style.width="".concat(o,"px"),i.style.left="0px",i.style.right="0px",i.style.margin="Opx auto",t.style.margin="0px"}else i.style.margin="0px"===this.img.compMargin?"auto":this.img.compMargin;i.appendChild(t)}}},{key:"setAdOverlay",value:function(t){var e=this;this.overlay=document.createElement("div"),this.container.style.position||(this.container.style.position="relative");var n=this.overlay.style;if(n.position="absolute",n.top="0px",n.left="0px",n.width="100%",n.height="100%",n.cursor="pointer",this.overlay.addEventListener("click",(function(n){t.url&&window.open(t.url,"_blank"),"function"==typeof e.onclick&&e.onclick(n)})),!this.sponsoredLabel){var i=document.createElement("div");i.style.color="#505971",i.style.position="absolute",i.style.bottom="10px",i.style.width="100%",i.style.textAlign="center",i.innerText="Sponsorisé",this.overlay.appendChild(i)}if(t.privacyIcon){var r=document.createElement("img");r.style.position="absolute",r.style.top="0px",r.style.right="0px",r.style.width="20px",r.style.height="20px",r.src=t.privacyIcon,t.privacyUrl&&r.addEventListener("click",(function(){window.open(t.privacyUrl,"_blank")})),this.overlay.appendChild(r)}this.container.appendChild(this.overlay)}},{key:"insertNativeAd",value:function(t){this.applyValues(t),this.setAdOverlay(t)}},{key:"addOverlayElement",value:function(t,e){null!==t.parentElement&&t.parentElement.removeChild(t),this.overlay.appendChild(t),t.style.position="absolute",t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),t.style.left="".concat(e.left,"px"),t.style.top="".concat(e.top,"px")}}],i&&lt(e.prototype,i),r&&lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ct(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=new st(t.cloneNode(!0));if(r.container.widthRatio=i,e.insertBefore(r.container,t),r.fetchElements(),i>1&&r.scaleWidth(i),n[0].length>1){var o=n[0].length,a=0;Array.from(e.children).forEach((function(t){t.style.clear=a%o==0?"left":"none",a+=t.widthRatio||1}))}return r}function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==ut(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ut(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===ut(o)?o:String(o)),i)}var r,o}function ht(){return ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},ht.apply(this,arguments)}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ft(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=yt(t);if(e){var r=yt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(s,t);var e,i,a,l=pt(s);function s(t,e,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(r=l.call(this,t,e,n,i)).id="IngridFormat",r.speed=.7,r.animatedDiv=document.createElement("div"),r.animatedDiv.style.overflow="hidden",r.animatedDiv.style.height="100%",r.animatedDiv.style.width="0px",r.animatedDiv.style.transition="width ease ".concat(r.speed,"s"),r.waitToStart=!1,r.adLoaded=!1,r}return e=s,(i=[{key:"callStart",value:function(t,e,i){this.placeholder=ct(t,e,i,this.config.ingridSize);var r=n(this.placeholder.container);this.resizeAd(r.width,r.height,"normal"),this.placeholder.container.style.minHeight="".concat(r.height,"px"),this.placeholder.container.replaceChildren(this.animatedDiv),this.placeholder.applyValues(),this.playerDiv.style.margin="auto",this.animatedDiv.appendChild(this.playerDiv),this.startAd()}},{key:"insertPlayer",value:function(t){var e=this,n=it(window.document.querySelector(t)),i=n.itemList,a=n.gridProfile;i?r((function(){var t=i,n=a[0].length,r=1;"right"===e.config.align?r=n-2:"center"===e.config.align&&(r=Math.floor((n-1)/2)),n>1&&(t=Array.from(i.children).filter((function(t,e){return e%n===r})));var l=o(t);e.itemList=i,e.gridProfile=a,e.callStart(l,i,a)})):d(u.DEBUG,"Cannot find retail item grid.")}},{key:"initAd",value:function(t,e,n,i,r,o){ht(yt(s.prototype),"initAd",this).call(this,t,e,n,i,r,o)}},{key:"onAdLoaded",value:function(){this.adLoaded=!0,ht(yt(s.prototype),"onAdLoaded",this).call(this)}},{key:"startAd",value:function(){this.adLoaded?ht(yt(s.prototype),"startAd",this).call(this):this.waitToStart=!0}},{key:"onAdStarted",value:function(){ht(yt(s.prototype),"onAdStarted",this).call(this),this.open()}},{key:"open",value:function(){this.animatedDiv.style.width=this.playerDiv.style.width}},{key:"close",value:function(){var t=this;this.animatedDiv.style.width="0px",window.setTimeout((function(){var e;null!==(e=t.placeholder.container)&&void 0!==e&&e.parentElement&&function(t,e,n){if(t.parentElement.removeChild(t),n[0].length>1){var i=n[0].length;Array.from(e.children).forEach((function(t,e){t.style.clear=e%i==0?"left":"none"}))}}(t.placeholder.container,t.itemList,t.gridProfile)}),1e3*this.speed)}},{key:"onAdStopped",value:function(){ht(yt(s.prototype),"onAdStopped",this).call(this),this.close()}},{key:"onAdVideoComplete",value:function(){ht(yt(s.prototype),"onAdVideoComplete",this).call(this),this.close()}}])&&dt(e.prototype,i),a&&dt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),s}(T);function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t,e,n){return(e=Et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Et(i.key),i)}}function Et(t){var e=function(t,e){if("object"!==mt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===mt(e)?e:String(e)}function St(t,e){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},St(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=xt(t);if(e){var r=xt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(a,t);var e,i,r,o=kt(a);function a(t,e,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,t,e,n,bt(bt({},i),{},{bgColor:"transparent"}))).id="IngridNativeFormat",r}return e=a,(i=[{key:"callStart",value:function(t,e,i){var r=this;this.placeholder=ct(t,e,i,this.config.ingridSize);var o=n(this.placeholder.container);this.resizeAd(o.width,o.height,"normal"),this.placeholder.container.style.minHeight="".concat(o.height,"px"),this.placeholder.insertNativeAd({title:"Galaxy Z Flip 5G",price:"999 €",desc:"The shape of the future. Le Z FLip4 512Go au prix du 256Go !\nCoque au choix offerte",ctatext:"En savoir plus",domain:"Samsung",image:{url:"https://imgart.casino.fr/imageserver/MC2/8/196608_M1_T1.jpg"},brandLogo:{url:null}}),this.placeholder.onclick=function(t){r.getInnerCreative().onAdClickThru()},this.placeholder.replaceImg(this.playerDiv,this.config.expandImage);var a,l,s,c,u=(a=this.playerDiv,l=this.placeholder.container,s=l.getBoundingClientRect(),{width:(c=a.getBoundingClientRect()).width,height:c.height,top:c.top-s.top,right:c.right-s.right,bottom:c.bottom-s.bottom,left:c.left-s.left});this.placeholder.addOverlayElement(this.adContainer,u),this.playerDiv.style.margin="auto",this.startAd()}}])&&wt(e.prototype,i),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(gt);function Ot(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.AUTO,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.VIDEO;switch(t){case f.INTEXT:return _;case f.INGRID:return e===h.NATIVE?Ct:gt;case f.SLIDER:return Z;default:return T}}var Pt='<svg xmlns="http://www.w3.org/2000/svg" height="{{HEIGHT}}px" viewBox="0 0 24 24" width="{{WIDTH}}px" fill="#FFFFFF"><path d="M0 0h24v24H0z" fill="none"/><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>',Tt='<svg xmlns="http://www.w3.org/2000/svg" height="{{HEIGHT}}px" viewBox="0 0 24 24" width="{{WIDTH}}px" fill="#FFFFFF"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>';function jt(t,e,n){var i=document.createElement("div");return i.innerHTML=t.replace("{{HEIGHT}}",n||48).replace("{{WIDTH}}",e||48),i}function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==It(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==It(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===It(o)?o:String(o)),i)}var r,o}var Rt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioUrl=e,this.audio=new Audio(this.audioUrl),this.volume=1}var e,n,i;return e=t,(n=[{key:"play",value:function(){this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"handleToggleAdVolume",value:function(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),0===this.volume?(this.soundon.style.display="",this.soundoff.style.display="none",this.volume=1):(this.soundon.style.display="none",this.soundoff.style.display="",this.volume=0),this.audio.volume=this.volume}},{key:"getSoundButton",value:function(t){return this.container=document.createElement("div"),this.container.style.width="".concat(t,"px"),this.container.style.height="".concat(t,"px"),this.soundon=jt(Tt,t,t),this.soundon.onclick=this.handleToggleAdVolume.bind(this),this.soundon.style.position="absolute",this.soundon.style.right="8px",this.soundon.style.bottom="8px",this.soundon.style.cursor="pointer",this.soundon.style.display="",this.soundon.style.lineHeight="0px",this.soundon.style.backgroundColor="rgb(0 0 0 / 30%)",this.soundon.style.borderRadius="50px",this.soundon.style.padding="4px",this.container.appendChild(this.soundon),this.soundoff=jt(Pt,t,t),this.soundoff.onclick=this.handleToggleAdVolume.bind(this),this.soundoff.style.position="absolute",this.soundoff.style.right="8px",this.soundoff.style.bottom="8px",this.soundoff.style.cursor="pointer",this.soundoff.style.display="none",this.soundoff.style.lineHeight="0px",this.soundoff.style.backgroundColor="rgb(0 0 0 / 30%)",this.soundoff.style.borderRadius="50px",this.soundoff.style.padding="4px",this.container.appendChild(this.soundoff),this.container}}])&&Dt(e.prototype,n),i&&Dt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Lt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Lt(o)?o:String(o)),i)}var r,o}var Ut=function(){function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parentWidth=i,this.parentHeight=r,this.container=document.createElement("div"),this.container.setAttribute("id",e),this.container.style.position="absolute",this.container.style.top="0px",this.container.style.left="0px",this.container.style.width="100%",this.container.style.height="100%",this.container.style.transition="opacity 1s ease-in-out",this.container.style.opacity=n,this.backgroundImg=document.createElement("div"),this.backgroundImg.style.position="absolute",this.backgroundImg.style.left="-15%",this.backgroundImg.style.top="-15%",this.backgroundImg.style.width="130%",this.backgroundImg.style.height="130%",this.backgroundImg.style.maxWidth="130%",this.backgroundImg.style.maxHeight="130%",this.backgroundImg.style.backgroundSize="cover",this.backgroundImg.style.backgroundPosition="center",this.backgroundImg.style.filter="blur(20px)",this.img=document.createElement("img"),this.img.setAttribute("id","rsatv-img1"),this.img.style.position="absolute",this.img.style.top="0px",this.img.style.left="0px",this.img.style.width="100%",this.img.style.height="100%",this.img.style.objectFit="contain",this.transitionString="transform ".concat(o,"s ease-in-out"),this.container.appendChild(this.backgroundImg),this.container.appendChild(this.img)}var e,n,i;return e=t,(n=[{key:"getElement",value:function(){return this.container}},{key:"setImageUrl",value:function(t){this.backgroundImg.style.backgroundImage="url(".concat(t,")"),this.img.src=t}},{key:"setOpacity",value:function(t){this.container.style.opacity=t}},{key:"prepareAnimation",value:function(){var t="scale(1)",e="scale(1.4)",n="translate(0px, 0px)",i="translate(0px, 0px)",r=this.naturalWidth/this.naturalHeight-this.parentWidth/this.parentHeight;if(Math.abs(r)<.2){var o=10*(Math.floor(3*Math.random())-1),a=10*(Math.floor(3*Math.random())-1);i="translate(".concat(o,"px, ").concat(a,"px)")}else if(r>0){var l=this.parentWidth/this.naturalWidth,s=this.naturalHeight*l,c=(this.parentHeight-s)/2;n="translate(0px, -".concat(c,"px)"),i="translate(0px, ".concat(c,"px)")}else if(r<0){var u=this.parentHeight/this.naturalHeight,d=this.naturalWidth*u,h=(this.parentWidth-d)/2;n="translate(-".concat(h,"px, 0px)"),i="translate(".concat(h,"px, 0px)")}var f="".concat(t," ").concat(n),p="".concat(e," ").concat(i);Math.floor(2*Math.random())&&(f="".concat(t," ").concat(i),p="".concat(e," ").concat(n)),Math.floor(2*Math.random())?(this.initialTransform=f,this.finalTransform=p):(this.initialTransform=p,this.finalTransform=f)}},{key:"animate",value:function(){var t=this;this.img.style.transition="",this.img.style.transform=this.initialTransform,window.getComputedStyle(this.img).height,window.setTimeout((function(){t.img.style.transition=t.transitionString,t.img.style.transform=t.finalTransform}),0)}},{key:"onceLoaded",value:function(){this.naturalWidth=this.img.naturalWidth,this.naturalHeight=this.img.naturalHeight,this.prepareAnimation(),this.onload&&window.setTimeout(this.onload,0)}},{key:"setOnLoadListener",value:function(t){this.onload=t,this.handler=this.onceLoaded.bind(this),this.img.addEventListener("load",this.handler)}},{key:"removeOnLoadListener",value:function(){this.img.removeEventListener("load",this.handler)}}])&&Vt(e.prototype,n),i&&Vt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Mt(t){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Mt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Mt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Mt(o)?o:String(o)),i)}var r,o}var _t=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.delay=e,this.color=n,this.text="";var r=Math.max(Math.min(parseInt(.047*i,10),30),12);this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.top="65%",this.container.style.left="0px",this.container.style.width="100%",this.container.style.height="35%",this.container.style.padding="10%",this.container.style.boxShadow="0 0 10px 10px #0005",this.container.style.backgroundColor="#0005",this.textElement=document.createElement("div"),this.textElement.style.position="absolute",this.textElement.style.top="0px",this.textElement.style.left="5%",this.textElement.style.maxWidth="80%",this.textElement.style.color="white",this.textElement.style.fontWeight="700",this.textElement.style.textDecoration="underline 5px ".concat(this.color),this.textElement.style.fontSize="".concat(r,"px"),this.textElement.style.lineHeight="".concat(r+6,"px"),this.underlineElement=document.createElement("div"),this.underlineElement.style.position="absolute",this.underlineElement.style.height="3px",this.underlineElement.style.width="0px",this.underlineElement.style.bottom="0px",this.underlineElement.style.backgroundColor=this.color,this.container.appendChild(this.textElement)}var e,n,i;return e=t,(n=[{key:"showText",value:function(t){var e=this;this.textElement.textContent="",this.underlineElement.style.width="0",this.text=t,setTimeout((function(){e.appearLetter(0),e.animateUnderline()}),this.delay)}},{key:"animateUnderline",value:function(){this.underlineElement.style.width="".concat("100%","px"),this.underlineElement.style.transition="width 500ms ease-in-out"}},{key:"appearLetter",value:function(t){var e=this;t>=this.text.length||(this.textElement.textContent+=this.text[t],setTimeout((function(){e.appearLetter(t+1)}),50))}},{key:"getElement",value:function(){return this.container}}])&&Nt(e.prototype,n),i&&Nt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Bt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Bt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Bt(o)?o:String(o)),i)}var r,o}var zt=function(){function t(e,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=i,this.height=r,this.container=n,this.article=e,this.currentSection=this.article.firstSection,this.imgIndex=0,this.switchInd=0,this.init(o)}var e,n,i;return e=t,(n=[{key:"init",value:function(t){var e=this,n=this.article.firstSection.getImgUrl(0);this.img1=new Ut("rsatv-img1",1,this.width,this.height,14),this.img2=new Ut("rsatv-img2",0,this.width,this.height,14),this.text=new _t(50,this.article.mainColor||"black",this.width);var i=18;this.width&&(i=Math.min(18,Math.min(32,this.width/10))),this.audio=new Rt("https://retailspot.github.io/RSPlayer-Demo/samples/ClosertoSpace.mp3");var r=this.audio.getSoundButton(i);this.container.style.background="transparent",this.container.style.overflow="hidden",this.container.style.cursor="pointer",this.container.appendChild(this.img1.getElement()),this.container.appendChild(this.img2.getElement()),this.container.appendChild(this.text.getElement()),this.container.appendChild(r),this.img1.setOnLoadListener((function(){e.img1.removeOnLoadListener(),e.img1.animate(),t()})),this.img1.setImageUrl(n),this.text.showText(this.article.firstSection.getText())}},{key:"start",value:function(){this.intervalId=window.setInterval(this.switchImage.bind(this),11e3),this.audio.play()}},{key:"switchImage",value:function(){this.imgIndex+=1,this.switchInd+=1;var t=this.currentSection.getImgUrl(this.imgIndex);t||(this.currentSection=this.currentSection.next,this.currentSection?(this.text.showText(this.currentSection.getText()),this.imgIndex=0,t=this.currentSection.getImgUrl()):this.end());var e=this.img1,n=this.img2;this.switchInd%2!=0&&(e=this.img2,n=this.img1),e.setOnLoadListener((function t(){e.setOpacity(1),e.animate(),n.setOpacity(0),e.removeOnLoadListener(t)})),e.setImageUrl(t)}},{key:"triggerClick",value:function(){this.currentSection.linkUrl&&window.open(this.currentSection.linkUrl,"_blank")}},{key:"end",value:function(){this.audio.pause(),window.clearInterval(this.intervalId),this.intervalId=-1,d(u.DEBUG,"RS-ATV End."),this.endCallback&&this.endCallback()}}])&&Ht(e.prototype,n),i&&Ht(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Ft(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Ft(o)?o:String(o)),i)}var r,o}function Wt(t,e){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wt(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=qt(t);if(e){var r=qt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}var $t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wt(t,e)}(o,t);var e,n,i,r=Qt(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(n=[{key:"initAd",value:function(t,e,n,i,r,o){var a=this;this.width=t,this.height=e,this.config=(null==r?void 0:r.AdParameters)||r,this.contentData=this.config.contentData,null!=o&&o.slot&&(this.adContainer=o.slot),this.renderer=new zt(this.contentData,this.adContainer,t,e,(function(){a.triggerEvent(p.AdLoaded)})),this.renderer.endCallback=function(){a.triggerEvent(p.AdStopped)}}},{key:"startAd",value:function(){this.video&&(this.video.style.visibility="hidden"),this.adContainer.style.display="",this.startTime=(new Date).getTime(),this.renderer.start(),this.triggerEvent(p.AdStarted),this.adContainer.addEventListener("click",this.onAdClickThru.bind(this)),this.adContainer.addEventListener("touch",this.onAdClickThru.bind(this))}},{key:"stopAd",value:function(){throw new Error("stopAd not implemented")}},{key:"skipAd",value:function(){throw new Error("skipAd not implemented")}},{key:"pauseAd",value:function(){throw new Error("pauseAd not implemented")}},{key:"resumeAd",value:function(){throw new Error("resumeAd not implemented")}},{key:"getRemainingTime",value:function(){return this.duration-this.elapsed}},{key:"mute",value:function(t){}},{key:"expandAd",value:function(){}},{key:"collapseAd",value:function(){}},{key:"getAdVolume",value:function(){return 1}},{key:"getAdDuration",value:function(){return 15*this.contentData.sections.length}},{key:"getAdRemainingTime",value:function(){return this.getAdDuration()-this.getAdElapsedTime()}},{key:"getAdElapsedTime",value:function(){return(new Date).getTime()-this.startTime}},{key:"getAdProgress",value:function(){return Math.round(100*(this.getAdElapsedTime()/this.getAdDuration()+Number.EPSILON))}},{key:"resizeAd",value:function(t,e){this.adContainer.style.width="".concat(t,"px"),this.adContainer.style.height="".concat(e,"px")}},{key:"onAdClickThru",value:function(){this.renderer.triggerClick()}}])&&Gt(e.prototype,n),i&&Gt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(m);function Xt(t,e){e(t),Array.from(t.children).forEach((function(t){Xt(t,e)}))}function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function Yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Zt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Zt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Zt(o)?o:String(o)),i)}var r,o}var Jt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.mainColor=n,this.firstSection=null,this.lastSection=null,this.colors={}}var e,n,i;return e=t,(n=[{key:"addSection",value:function(t){t.title||(t.title=this.title),this.firstSection?(this.lastSection.next=t,this.lastSection=t):(this.firstSection=t,this.lastSection=t)}},{key:"addColor",value:function(t){var e=this;if(t&&"rgb(0, 0, 0)"!==t){this.colors[t]?this.colors[t]+=1:this.colors[t]=1;var n="",i=0;Object.keys(this.colors).forEach((function(t){var r=e.colors[t];r>i&&(i=r,n=t)})),n&&(this.mainColor=n)}}}])&&Yt(e.prototype,n),i&&Yt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==Kt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==Kt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===Kt(o)?o:String(o)),i)}var r,o}var ee=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.images=[],this.textContent="",this.price=null,this.linkUrl=null}var e,n,i;return e=t,n=[{key:"getImgUrl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t>this.images.length-1?null:this.images[t]}},{key:"getText",value:function(){var t=this.title;return this.price&&(t="".concat(this.title," - ").concat(this.price)),t}}],n&&te(e.prototype,n),i&&te(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function ie(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==ne(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===ne(o)?o:String(o)),i)}var r,o}var re=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contentElement=document.querySelector(e.contentSelector)||window.document.body;var n=this.contentElement.querySelectorAll("H1")[0];this.content=new Jt(null==n?void 0:n.textContent.trim()),this.error="Not initialised."}var e,n,i;return e=t,(n=[{key:"getContent",value:function(){return this.fetchGrid()||this.fetchPage()}},{key:"fetchGrid",value:function(){var t=this,e=it().itemList;if(null!=e&&e.children.length){d(u.DEBUG,"Found Grid to get content from");var n=function(t){return(t=(t=t.trim()).split(" ").filter((function(t,e,n){return e===n.indexOf(t)})).join(" ")).replaceAll(/\.\.\.|(Livré avec.*)|(avec.*)|(, .*)|(style.*)|(modèle.*)|(\(.*\))|(\..*)/g,"")};Array.from(e.children).forEach((function(e,i){var r=new st(e,!0);r.fetchElements();var o=n(r.title.innerText);o.length<6&&(o=n(r.desc.innerText)),t.content.addColor(r.title.computedColor),t.content.addColor(r.desc.computedColor);var a,l=new ee(o);if(a=r.img.src,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a)){l.images.push(r.img.src),l.linkUrl=r.link.href;var s=r.price;if(s){var c=s.originalValue||s.innerText;l.price=c.trim(),t.content.addColor(l.price.computedColor)}t.content.addSection(l)}}))}return this.content.firstSection?(this.error="",this.content):null}},{key:"fetchPage",value:function(){var t,e,n,i=(t=this.contentElement,e=null,n=0,Array.from(t.querySelectorAll("div, section, article, p")).forEach((function(t){var i=Array.from(t.children).filter((function(t){var e=t.textContent;return"P"===t.nodeName&&e.length>70}));i.length>n&&(n=i.length,e=t)})),e);return null===i?this.error="Cannot find article content.":(d(u.DEBUG,"Found Text element to get content from"),this.error="",this.parse(i,this.contentElement)),this.content}},{key:"parse",value:function(t){var e,n=this,i=null;i=new ee(null===(e=this.mainTitleElement)||void 0===e?void 0:e.textContent),Xt(t,(function(t){if(["H1","H2","H3","H4","H5"].includes(t.nodeName)){var e=window.getComputedStyle(t);n.content.addSection(i),i=new ee(t.textContent),e.color&&n.content.addColor(e.color)}else["P"].includes(t.nodeName)?i.textContent+=t.textContent.trim():["IMG"].includes(t.nodeName)&&i.images.push(t.getAttribute("src"))})),this.content.addSection(i)}}])&&ie(e.prototype,n),i&&ie(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oe(t,e){var n=new re(t),i=n.getContent();if(n.error)d(u.DEBUG,"ATV parser error: ",n.error);else{t.contentData=i;var r=document.createElement("video");r.setAttribute("playsinline","true"),r.setAttribute("webkit-playsinline","true");var o=document.createElement("div");o.id="RS-atv-ad-".concat(Math.round(1e4*Math.random()));var a=new $t;(a=new(Ot(t.format,t.mediatype))(a,r,o,t)).initAd(t.width,t.height,"normal",null,t,{slot:o,videoSlot:r,videoSlotCanAutoPlay:!0})}}window.RSATVConfig&&oe(window.RSATVConfig),RSATV=e})();